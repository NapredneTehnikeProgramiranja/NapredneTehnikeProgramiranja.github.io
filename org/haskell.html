<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="sr" xml:lang="sr">
<head>
<!-- 2018-06-07 Thu 20:54 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Napredne tehnike programiranja - Haskell</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Novak BoÅ¡kov" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="http://www.pirilampo.org/styles/bigblow/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="http://www.pirilampo.org/styles/bigblow/css/bigblow.css"/>
<link rel="stylesheet" type="text/css" href="http://www.pirilampo.org/styles/bigblow/css/hideshow.css"/>
<script type="text/javascript" src="http://www.pirilampo.org/styles/bigblow/js/jquery-1.11.0.min.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/bigblow/js/jquery-ui-1.10.2.min.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/bigblow/js/jquery.localscroll-min.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/bigblow/js/jquery.scrollTo-1.4.3.1-min.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/bigblow/js/jquery.zclip.min.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/bigblow/js/bigblow.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/bigblow/js/hideshow.js"></script>
<script type="text/javascript" src="http://www.pirilampo.org/styles/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2018 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>
<div id="content">
<h1 class="title">Napredne tehnike programiranja - Haskell</h1>
<div id="table-of-contents">
<h2>Sadr&#382;aj</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org56300c9">1. Uvod</a>
<ul>
<li><a href="#org978fd8f">1.1. Tipovi</a></li>
<li><a href="#orgbf85b78">1.2. Apstrakcije</a></li>
<li><a href="#org346e275">1.3. <i>Wholemeal</i> programiranje</a></li>
<li><a href="#org46b10a5">1.4. Elementi jezika</a>
<ul>
<li><a href="#org49175c4">1.4.1. Dekleracije i variable</a></li>
<li><a href="#org99b8e2e">1.4.2. Osnovni tipovi</a></li>
<li><a href="#orge13e2bf">1.4.3. Aritmetika</a></li>
<li><a href="#org7ddca40">1.4.4. Boolova logika</a></li>
<li><a href="#orgce8e631">1.4.5. Definisanje osnovnih funkcija</a></li>
<li><a href="#org1e2aad4">1.4.6. Parovi</a></li>
<li><a href="#org401af12">1.4.7. Funkcije viÅ¡e argumenata</a></li>
<li><a href="#orgbaa62c9">1.4.8. Liste</a></li>
<li><a href="#org7cde10b">1.4.9. Konstrukcija listi</a></li>
<li><a href="#org0659a77">1.4.10. Funkcije nad listama</a></li>
<li><a href="#orge852d02">1.4.11. Kombinovanje funkcija</a></li>
<li><a href="#org3538e6e">1.4.12. Pragme</a></li>
</ul>
</li>
<li><a href="#org6eaca9b">1.5. Kompajler (GHC)</a>
<ul>
<li><a href="#org3b603e1">1.5.1. <i>Type inference</i></a></li>
</ul>
</li>
<li><a href="#orgabc0fa8">1.6. GHCi</a></li>
<li><a href="#orgdd83268">1.7. IDE</a>
<ul>
<li><a href="#orgf3233ee">1.7.1. Hoogle</a></li>
<li><a href="#org3ab13c6">1.7.2. Stack &amp; Stackage</a></li>
</ul>
</li>
<li><a href="#org639b982">1.8. Äitanje poruka o greÅ¡ci</a></li>
<li><a href="#org979f452">1.9. OgraniÄenja GHC kompajlera&#xa0;&#xa0;&#xa0;<span class="tag"><span class="za_radoznale">za_radoznale</span></span></a>
<ul>
<li><a href="#org49c8803">1.9.1. Monomorfizam restrikcija</a></li>
</ul>
</li>
<li><a href="#orge4e35a1">1.10. Zadaci 1</a></li>
</ul>
</li>
<li><a href="#org4c48fce">2. Funkcije</a></li>
<li><a href="#org27c61ea">3. Data deklaracije</a>
<ul>
<li><a href="#org44d61b8">3.1. <code>data</code></a>
<ul>
<li><a href="#orgfceef80">3.1.1. Records sintaksa</a></li>
</ul>
</li>
<li><a href="#org6555a33">3.2. <code>newtype</code></a></li>
<li><a href="#org6b2ae4e">3.3. <code>type</code></a></li>
</ul>
</li>
<li><a href="#org9196c97">4. Kinds</a></li>
<li><a href="#org3eca72b">5. Haskell &#x2014; lazy by default</a>
<ul>
<li><a href="#org6918a97">5.1. <i>Strict evaluation vs. lazy evaluation</i></a>
<ul>
<li><a href="#orgd00f77c">5.1.1. Cena <i>strict</i> izraÄunavanja</a></li>
<li><a href="#orgfaf0e57">5.1.2. Cena <i>lazy</i> izraÄunavanja</a></li>
</ul>
</li>
<li><a href="#orga546fa6">5.2. Haskell <i>laziness look and feel</i> vs. Java <i>Supliers</i> ("<i>type level laziness</i>")</a></li>
</ul>
</li>
<li><a href="#org397c645">6. Polimorfizam</a></li>
<li><a href="#orgaa81928">7. GADTs</a></li>
<li><a href="#orgecc57a1">8. Type Classes</a>
<ul>
<li><a href="#org2084e12">8.1. Automatsko instanciranje sa <code>deriving</code></a></li>
<li><a href="#orge5cc757">8.2. <code>class</code> NIJE <code>class</code> iz Pythona i Jave</a></li>
<li><a href="#org3da4c67">8.3. <i>fundeps</i> (Functional Dependencies)</a></li>
<li><a href="#orgec04ba7">8.4. Zadaci 2</a></li>
</ul>
</li>
<li><a href="#org1456cad">9. Monoidi</a>
<ul>
<li><a href="#org2009bad">9.1. Monoid u teoriji kategorija</a></li>
</ul>
</li>
<li><a href="#org18422ba">10. Funktori</a>
<ul>
<li><a href="#org6ae78b0">10.1. Primeri funktora u programiranju</a>
<ul>
<li><a href="#orgaae7e9b">10.1.1. Maybe funktor</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgcf4c239">11. Aplikativni funktori</a></li>
<li><a href="#orgaad5ad3">12. Monade</a>
<ul>
<li><a href="#orgc0c85a4">12.1. Kleisli kategorija</a></li>
</ul>
</li>
<li><a href="#org3cb0d92">13. Profiling</a>
<ul>
<li><a href="#org6f1bf9f">13.1. Primitivni profiling samo sa Unix <code>time</code></a></li>
<li><a href="#org5f79b08">13.2. GHC podrÅ¡ka za profiling</a>
<ul>
<li><a href="#org6449fc2">13.2.1. JoÅ¡ neke <i>RTS</i> (<i>Run Time System</i>) opcije</a></li>
<li><a href="#org263daa0">13.2.2. PotroÅ¡nja memorije kroz vreme</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org4a4c7bb">14. Haskell Core&#xa0;&#xa0;&#xa0;<span class="tag"><span class="za_radoznale">za_radoznale</span></span></a></li>
<li><a href="#org00f5687">15. Literatura</a>
<ul>
<li><a href="#org2b476ab">15.1. Teorija kategorija i programiranje</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div class="figure">
<p><img src="images/haskell_logo.png" alt="haskell_logo.png" width="400px" />
</p>
</div>

<blockquote>
<p>
An advanced, purely functional, statically typed, lazy programming
language.
</p>
</blockquote>

<div id="outline-container-org56300c9" class="outline-2">
<h2 id="org56300c9"><span class="section-number-2">1</span> Uvod<sup><a id="fnr.1" class="footref" href="#fn.1">1</a></sup></h2>
<div class="outline-text-2" id="text-1">
<p>
Haskell je Äisto funkcionalan programski jezik opÅ¡te
namene. KarakteriÅ¡e ga <a href="https://en.wikipedia.org/wiki/Evaluation_strategy#Non-strict_evaluation">non-strict</a> semantika i stroga statiÄka
tipizacija. Ime je dobio po logiÄaru <a href="https://en.wikipedia.org/wiki/Haskell_Curry">Haskell Curry</a>-ju. Nastao je
kasnih 80-tih godina kao rezultat rada grupe akademaca u oblasti
raÄunarskih nauka. Haskell je izgraÄen oko veoma napredanog <i>type
system</i>-a koji sadrÅ¾i algoritam za zakljuÄivanje tipova (<a href="https://en.wikipedia.org/wiki/Type_inference">type
inference</a>) pa se veoma malo jeziÄkih konstrukcija u kodu mora
eksplicitno obeleÅ¾iti tipovima.
</p>

<p>
Haskell jasno nameÄe naÄin razmiÅ¡ljanja. Jedino kod nastao Äisto
funkcionalnim naÄinom razmiÅ¡ljanja se moÅ¾e<sup><a id="fnr.2" class="footref" href="#fn.2">2</a></sup> zapisati u
Haskell-u. Tipski neispravne izraze kompajler detektuje i
zabranjuje.
</p>

<p>
PoÅ¡to je "funckionalan programski jezik" veoma rastegljiv pojam
odmah ovde na poÄetku Äemo reÄi Å¡ta za nas znaÄi da je Haskell
funkcionalan:
</p>

<ul class="org-ul">
<li>Funkcije su prvoklasni koncepti.</li>
<li>ZnaÄenje Haskell programa je izgraÄeno na osnovu izraÄunavanja
izraza a ne na izvrÅ¡avanju naredbi &#x2014; <i>Haskell nema naredbe</i>.</li>
</ul>

<p>
PoÅ¡to je "Äisto funkcionalan programski jezik" takoÄe rastegljiv
pojam u poslednje vreme i to Äemo odmah na poÄetku jasno
odrediti. Kada kaÅ¾emo da je Haskell Äisto funkcionalan programski
jezik to znaÄi:
</p>

<ul class="org-ul">
<li>Nema mutiranja, nigde! Sve je imutabilno.</li>
<li>Izrazi nikada nemaju sporedne efekte (ni kod ispisivanja na
ekran<sup><a id="fnr.3" class="footref" href="#fn.3">3</a></sup>).</li>
<li>Sve funkcije za iste ulaze vraÄaju iste izlaze.</li>
</ul>

<p>
Haskell je istinski lenj. Dakle, <span class="underline">nije da veÄina funckija vraÄa
lenje sekvence</span> veÄ neÅ¡to striktnije:
</p>

<ul class="org-ul">
<li>Izrazi ( <span class="underline">svi</span>, <span class="underline">bilo koji</span> ) se ne evaluiraju dok njihov rezultat
nije potreban za neko drugo izraÄunavanje.</li>
<li>OmoguÄuje kompozicijsko programiranje (<a href="#org346e275">wholemeal programiranje</a>).</li>
<li>To ima svoju manu &#x2014; rezonovanje o koriÅ¡Äenju vremena i prostora
postaje dosta komplikovanije.</li>
</ul>

<p>
Haskell je statiÄki tipiziran jezik &#x2014; <span class="underline">svaki</span> izraz ima svoj tip i
svi tipovi se proveravaju u vreme kompajliranja. Program koji nije
korektan sa stanoviÅ¡ta tipova se ne moÅ¾e kompajlirati a joÅ¡ manje
pokrenuti. Tipovi izraza <span class="underline">nisu</span> dostupni u vreme izvrÅ¡avanja &#x2014;
<span class="underline">nisu</span> ni potrebni<sup><a id="fnr.4" class="footref" href="#fn.4">4</a></sup>, kompajlirani kod je <span class="underline">korektan</span> i to je dokazivo
"matematikom koja stoji iza Haskell kompajlera".<sup><a id="fnr.5" class="footref" href="#fn.5">5</a></sup>
</p>

<p>
U nastavku Äemo dati neke ideje koje su od najveÄe vaÅ¾nosti u
Haskell porgramiranju.
</p>
</div>

<div id="outline-container-org978fd8f" class="outline-3">
<h3 id="org978fd8f"><span class="section-number-3">1.1</span> Tipovi</h3>
<div class="outline-text-3" id="text-1-1">
<p>
Haskell ima statiÄki type sistem. StatiÄki type sistemi propisuju
da tipovi izraza (a u procedurnim jezivima objekata, promenljivih)
moraju biti poznati u vreme kompajliranja.
</p>

<p>
Kada programer u kodu mora da anotira sve izraze to moÅ¾e da bude
priliÄno dosadna stvar. Ono Å¡to je bitno da zapamtimo je:
</p>

<blockquote>
<p>
Obavezna anotacija svih izraza u programu <span class="underline">nije</span> osobina statiÄkih
type sistema veÄ pre posledica nedovoljne ekspresivnosti <span class="underline">nekih</span>
statiÄkih type sistema (kao Å¡to je sluÄaj kod Java, C, C++, C#&#x2026;).
</p>
</blockquote>

<p>
Haskell-ov type sistem nam daje sledeÄe stvari:
</p>

<ul class="org-ul">
<li><p>
PomaÅ¾e nam da promislimo i izrazimo svoj program
</p>

<p>
Prvi korak u pisanju Haskell programa je popiÅ¡emo sve tipove koji
su potrebni. PoÅ¡to je Haskell-ov type sistem priliÄno ekspresivan
to nije trivijalan zadatak ali zato jeste veliki korak ka jasnom
razumevanju strukture programa.
</p>

<blockquote>
<p>
Kao posledicu imamo da kada ne znamo Å¡ta treba da radi program ne
moÅ¾emo takav program ni da napravimo (kompajliramo). Kolikogod
prethodna reÄenica zvuÄala paradoksalno svi smo nekada svedoÄili
situacijama u kojima je program napisan, i radi, Äak iako niko
nije u stanju da kaÅ¾e Å¡ta treba da radi.
</p>
</blockquote></li>

<li><p>
SluÅ¾i kao forma dokumentacije
</p>

<p>
Type sistem je toliko ekspresivan da Äitanje tipa funkcije
najÄeÅ¡Äe veÄ samo govori sasvim dovoljno o tome Å¡ta funkcija radi
pa tekst o tome Å¡ta funckija radi nije neophodan. Mnoge
standardne Haskell funckije nemaju dokumentaciju u vidu teksta!
</p></li>

<li><p>
Pretvara <i>run-time</i> greÅ¡ke u <i>compile-time</i> greÅ¡ke
</p>

<p>
Bolje je imati korektan program nakon kompajliranja nego
beskrajno testirati u <i>run-time</i>-u. Haskell ima maksimu &#x2014; <b>ako
se kompajlira onda je korektno</b>. Postoji moguÄnost da se
"provuÄe" neka greÅ¡ka vezana za logiku programa ali se i to u
Haskell-u oÄekuje reÄe nego u ostalim programskim jezicima.
</p></li>
</ul>
</div>
</div>

<div id="outline-container-orgbf85b78" class="outline-3">
<h3 id="orgbf85b78"><span class="section-number-3">1.2</span> Apstrakcije</h3>
<div class="outline-text-3" id="text-1-2">
<p>
"Don't Repeat Yourself" je Äesta mantra koja se Äuje u danaÅ¡njem
programiranju, u nauci se zove joÅ¡ i <i>Princip Apstrakcije</i>. Idaja
je da niÅ¡ta ne treba pisati viÅ¡e puta: svaka ideja, algoritam,
parÄe podatka treba da se pojavi samo na jednom jedinom mestu u
kodu. Izdvajanje sliÄnih delova koda se naziva procesom
apstrakcije.
</p>

<p>
Haskell je vrlo dobar u apstrahovanju. Koncepti kao Å¡to su
<i>parametric polymorphism</i>, funkcije viÅ¡eg reda, <i>type classes</i> i
drugi za cilj imaju da se izbore za princip apstrakcije.
</p>

<blockquote>
<p>
Da li je VaÅ¡ softver <i>DRY</i>?
</p>

<p>
Å ta je VaÅ¡ izgovor?
</p>
</blockquote>
</div>
</div>

<div id="outline-container-org346e275" class="outline-3">
<h3 id="org346e275"><span class="section-number-3">1.3</span> <i>Wholemeal</i> programiranje</h3>
<div class="outline-text-3" id="text-1-3">
<p>
Citat <a href="http://www.cs.ox.ac.uk/ralf.hinze/">Ralf Hinze</a>:
</p>

<blockquote>
<p>
âFunctional languages excel at wholemeal programming, a term coined
by Geraint Jones. Wholemeal programming means to think big: work
with an entire list, rather than a sequence of elements; develop a
solution space, rather than an individual solution; imagine a
graph, rather than a single path. The wholemeal approach often
offers new insights or provides new perspectives on a given
problem. It is nicely complemented by the idea of projective
programming: first solve a more general problem, then extract the
interesting bits and pieces by transforming the general program
into more specialised ones.â
</p>
</blockquote>

<p>
<i>Wholemeal</i> programiranje je dakle <a href="https://sh.wikipedia.org/wiki/Dedukcija">deduktivan</a> proces.
</p>

<p>
Pogledajmo ovo parÄe pseudo Java/C#/C&#x2026; koda:
</p>

<div class="org-src-container">
<pre class="src src-c"><span style="color: #ba2f59; font-weight: bold;">int</span> <span style="color: #715ab1;">acc</span> = 0;
<span style="color: #3a81c3; font-weight: bold;">for</span> ( <span style="color: #ba2f59; font-weight: bold;">int</span> <span style="color: #715ab1;">i</span> = 0; i &lt; lst.length; i++ ) {
    acc = acc + 3 * lst[i];
}
</pre>
</div>

<p>
<a href="http://www.cs.ox.ac.uk/people/richard.bird/">Richard Bird</a> kaÅ¾e da ovo parÄe koda boluje od "indeksitisa": brine
se o iteriranju kroz niz na niskom nivou &#x2014; tako Å¡to prati
indekse. Pored toga joÅ¡ i meÅ¡a u jedno ono Å¡to se obiÄno smatra kao
dve operacije &#x2014; uveÄavanje svakog elementa za 3 i sabiranje svih
elemenata. U Haskell-u to bismo uradili ovako:
</p>

<div class="org-src-container">
<pre class="src src-haskell">sum <span style="color: #6c3163; font-weight: bold;">$</span> map (3<span style="color: #715ab1;">*</span>) lst
</pre>
</div>
</div>
</div>

<div id="outline-container-org46b10a5" class="outline-3">
<h3 id="org46b10a5"><span class="section-number-3">1.4</span> Elementi jezika</h3>
<div class="outline-text-3" id="text-1-4">
<p>
MoÅ¾emo reÄi da se Haskell sastoji iz dva jezika: <b>jezik tipova</b> i
<b>jezik izraza</b> gde prvi nije obavezno pisati jer <i>type inference</i>
algoritam ume da zakljuÄi informacije koje on nosi. Konstrukcija
<code>::</code> razdvaja ova dva jezika.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #6c3163; font-weight: bold;">jezik</span> izraza <span style="color: #715ab1;">::</span> jezik tipova
</pre>
</div>

<p>
<code>::</code> se joÅ¡ Äita i "ima tip".
</p>
</div>

<div id="outline-container-org49175c4" class="outline-4">
<h4 id="org49175c4"><span class="section-number-4">1.4.1</span> Dekleracije i variable</h4>
<div class="outline-text-4" id="text-1-4-1">
<p>
Deklarisanje promenljivih moÅ¾emo uraditi na sledeÄi naÄin:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">this is a declaration</span>
<span style="color: #6c3163; font-weight: bold;">x</span> <span style="color: #715ab1;">::</span> <span style="color: #ba2f59; font-weight: bold;">Int</span>
<span style="color: #6c3163; font-weight: bold;">x</span> <span style="color: #715ab1;">=</span> 23
<span style="color: #2aa1ae; background-color: #ecf3ec;">{- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">this was declaration with some long long multi-line comment which</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;"> exceeds standard line lenght in my editor</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-}</span>
</pre>
</div>

<p>
Kod iznad deklariÅ¡e variablu koja ima tip <code>Int</code> i
vrednost 3. Imajte u vidu da se ova promenljiva <b>ne moÅ¾e</b> viÅ¡e
nikada promeniti ona Äe do kraja sveta(dobro programa) imati
vrednost koju smo joj ovde zadali. TakoÄe, ako pokuÅ¡amo negde
drugo ponovo da deklariÅ¡emo ovu istu variablu kompajler Äe
prijaviti greÅ¡ku:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">x = 42</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">src/Intro.hs:10:1: error: &#8230;</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">--     </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Multiple declarations of &#8216;x&#8217;</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">--     </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Declared at: /home/novak/haskell/haskellNTP/showcase/src/Intro.hs:5:1</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">--                  </span><span style="color: #2aa1ae; background-color: #ecf3ec;">/home/novak/haskell/haskellNTP/showcase/src/Intro.hs:10:1</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Compilation failed.</span>
</pre>
</div>

<p>
Dakle, <i>=</i> <b>ne predstavlja</b> <i>dodelu</i> kao Å¡to je sluÄaj u mnogim
drugim jezicima veÄ <i>definiciju</i> kao u matematici. Dakle <code>x = 1</code>
se <b>ne Äita</b> kao "x dobija vrednost 1" ili "dodeljujem broj 4
promenljivoj x" veÄ <b>"x je definisano kao 1"</b>. Å ta radi sledeÄi
kod?
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #6c3163; font-weight: bold;">b</span> <span style="color: #715ab1;">::</span> <span style="color: #ba2f59; font-weight: bold;">Int</span>
<span style="color: #6c3163; font-weight: bold;">b</span> <span style="color: #715ab1;">=</span> b <span style="color: #715ab1;">+</span> 1
</pre>
</div>
</div>
</div>

<div id="outline-container-org99b8e2e" class="outline-4">
<h4 id="org99b8e2e"><span class="section-number-4">1.4.2</span> Osnovni tipovi</h4>
<div class="outline-text-4" id="text-1-4-2">
<p>
<code>Int</code> je osnovni celobrojni tip i po standardu mora biti u stanju
da prikaÅ¾e vrednosti u opsegu ne manjem od \(\pm2^{29}\). Na
standardnim 64-bitnim maÅ¡inama je \(\pm2^{63}\). Maksimalna i
minimalna vrednost <code>Int</code> tipa su date sa <code>biggestInt</code> i
<code>smallestInt</code>:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #6c3163; font-weight: bold;">biggestInt, smallestInt</span> <span style="color: #715ab1;">::</span> <span style="color: #ba2f59; font-weight: bold;">Int</span>
<span style="color: #6c3163; font-weight: bold;">biggestInt</span> <span style="color: #715ab1;">=</span> maxBound
<span style="color: #6c3163; font-weight: bold;">smallestInt</span> <span style="color: #715ab1;">=</span> minBound
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#955;&gt; biggestInt</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">9223372036854775807</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#955;&gt; smallestInt</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">-9223372036854775808</span>
</pre>
</div>

<p>
<code>Integer</code> tip je proizvoljne preciznosti i ograniÄen je samo
memorijom raÄunara:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #6c3163; font-weight: bold;">bigInteger</span> <span style="color: #715ab1;">::</span> <span style="color: #ba2f59; font-weight: bold;">Integer</span>
<span style="color: #6c3163; font-weight: bold;">bigInteger</span> <span style="color: #715ab1;">=</span> 1234567890987654321987340982334987349872349874534
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#955;&gt; bigInteger</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">1234567890987654321987340982334987349872349874534</span>

<span style="color: #6c3163; font-weight: bold;">reallyBig</span> <span style="color: #715ab1;">::</span> <span style="color: #ba2f59; font-weight: bold;">Integer</span>
<span style="color: #6c3163; font-weight: bold;">reallyBig</span> <span style="color: #715ab1;">=</span> 2<span style="color: #715ab1;">^</span>(2<span style="color: #715ab1;">^</span>(2<span style="color: #715ab1;">^</span>(2<span style="color: #715ab1;">^</span>2)))

<span style="color: #6c3163; font-weight: bold;">digitsNumOfReallyBig</span> <span style="color: #715ab1;">::</span> <span style="color: #ba2f59; font-weight: bold;">Int</span>
<span style="color: #6c3163; font-weight: bold;">digitsNumOfReallyBig</span> <span style="color: #715ab1;">=</span> length (show reallyBig)
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#955;&gt; digitsNumOfReallyBig</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">19729</span>
</pre>
</div>

<p>
<code>Float</code> je standardan tip za predstavu razlomljenih brojeva u
<i>single-precision</i>, <code>Double</code> je <i>double-precision</i>:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #6c3163; font-weight: bold;">d1, d2</span> <span style="color: #715ab1;">::</span> <span style="color: #ba2f59; font-weight: bold;">Double</span>
<span style="color: #6c3163; font-weight: bold;">d1</span> <span style="color: #715ab1;">=</span> 4.5387
<span style="color: #6c3163; font-weight: bold;">d2</span> <span style="color: #715ab1;">=</span> 6.2831e-4
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#955;&gt; d1</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">4.5387</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#955;&gt; d2</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">6.2831e-4</span>
</pre>
</div>

<p>
Tu su i <code>Bool</code>, <code>Char</code> i <code>String</code>:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #6c3163; font-weight: bold;">b1, b2</span> <span style="color: #715ab1;">::</span> <span style="color: #ba2f59; font-weight: bold;">Bool</span>
<span style="color: #6c3163; font-weight: bold;">b1</span> <span style="color: #715ab1;">=</span> <span style="color: #ba2f59; font-weight: bold;">True</span>
<span style="color: #6c3163; font-weight: bold;">b2</span> <span style="color: #715ab1;">=</span> <span style="color: #ba2f59; font-weight: bold;">False</span>

<span style="color: #6c3163; font-weight: bold;">c1, c2, c3</span> <span style="color: #715ab1;">::</span> <span style="color: #ba2f59; font-weight: bold;">Char</span>
<span style="color: #6c3163; font-weight: bold;">c1</span> <span style="color: #715ab1;">=</span> <span style="color: #2d9574;">'x'</span>
<span style="color: #6c3163; font-weight: bold;">c2</span> <span style="color: #715ab1;">=</span> <span style="color: #2d9574;">'&#216;'</span>
<span style="color: #6c3163; font-weight: bold;">c3</span> <span style="color: #715ab1;">=</span> <span style="color: #2d9574;">'&#12480;'</span>

<span style="color: #6c3163; font-weight: bold;">s</span> <span style="color: #715ab1;">::</span> <span style="color: #ba2f59; font-weight: bold;">String</span>
<span style="color: #6c3163; font-weight: bold;">s</span> <span style="color: #715ab1;">=</span> <span style="color: #2d9574;">"Hello, Haskell!"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orge13e2bf" class="outline-4">
<h4 id="orge13e2bf"><span class="section-number-4">1.4.3</span> Aritmetika</h4>
<div class="outline-text-4" id="text-1-4-3">
<p>
Probajmo sledeÄe izraze:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #6c3163; font-weight: bold;">ex01</span> <span style="color: #715ab1;">=</span> 3 <span style="color: #715ab1;">+</span> 2
<span style="color: #6c3163; font-weight: bold;">ex02</span> <span style="color: #715ab1;">=</span> 19 <span style="color: #715ab1;">-</span> 27
<span style="color: #6c3163; font-weight: bold;">ex03</span> <span style="color: #715ab1;">=</span> 2.35 <span style="color: #715ab1;">*</span> 8.6
<span style="color: #6c3163; font-weight: bold;">ex04</span> <span style="color: #715ab1;">=</span> 8.7 <span style="color: #715ab1;">/</span> 3.1
<span style="color: #6c3163; font-weight: bold;">ex05</span> <span style="color: #715ab1;">=</span> mod 19 3
<span style="color: #6c3163; font-weight: bold;">ex06</span> <span style="color: #715ab1;">=</span> 19 <span style="color: #715ab1;">`mod`</span> 3
<span style="color: #6c3163; font-weight: bold;">ex07</span> <span style="color: #715ab1;">=</span> 7 <span style="color: #715ab1;">^</span> 222
<span style="color: #6c3163; font-weight: bold;">ex08</span> <span style="color: #715ab1;">=</span> (<span style="color: #715ab1;">-</span>3) <span style="color: #715ab1;">*</span> (<span style="color: #715ab1;">-</span>7)
</pre>
</div>

<ul class="org-ul">
<li><i>backticks</i> prefiksnu funkciju pretvaraju u infiksnu</li>
<li>minusi kao znakovi moraju biti u zagradama kako ne bi bili
parsirani kao oduzimanje</li>
</ul>

<p>
SledeÄi izraz ne prolazi kompajler:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">badArith = x + bigInteger</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&lt;interactive&gt;:73:5-14: error:</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">--     </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#8226; Couldn't match expected type &#8216;Int&#8217; with actual type &#8216;Integer&#8217;</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">--     </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#8226; In the second argument of &#8216;(+)&#8217;, namely &#8216;bigInteger&#8217;</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">--       </span><span style="color: #2aa1ae; background-color: #ecf3ec;">In the expression: x + bigInteger</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">--       </span><span style="color: #2aa1ae; background-color: #ecf3ec;">In an equation for &#8216;it&#8217;: it = x + bigInteger</span>
</pre>
</div>

<p>
Haskell neÄe raditi implicitnu konverziju izmeÄu ova dva tipa,
morate Vi eksplicitno:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #6c3163; font-weight: bold;">goodArith</span> <span style="color: #715ab1;">=</span> x <span style="color: #715ab1;">+</span> fromInteger(bigInteger)
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#955;&gt; goodArith</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">7636536262163761533</span>
</pre>
</div>

<p>
Ovo takoÄe ne prolazi kompajler:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">one = x / x</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&lt;interactive&gt;:80:1-5: error:</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">--     </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#8226; No instance for (Fractional Int) arising from a use of &#8216;/&#8217;</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">--     </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#8226; In the expression: x / x</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">--       </span><span style="color: #2aa1ae; background-color: #ecf3ec;">In an equation for &#8216;it&#8217;: it = x / x</span>
</pre>
</div>

<p>
Za deljenje celobrojnih vrednosti moramo da koristimo <code>div</code>:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #6c3163; font-weight: bold;">one</span> <span style="color: #715ab1;">=</span> x <span style="color: #715ab1;">`div`</span> x
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#955;&gt; one</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">1</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org7ddca40" class="outline-4">
<h4 id="org7ddca40"><span class="section-number-4">1.4.4</span> Boolova logika</h4>
<div class="outline-text-4" id="text-1-4-4">
<p>
Ovo radi kako ste i navikli:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #6c3163; font-weight: bold;">ex11</span> <span style="color: #715ab1;">=</span> <span style="color: #ba2f59; font-weight: bold;">True</span> <span style="color: #715ab1;">&amp;&amp;</span> <span style="color: #ba2f59; font-weight: bold;">False</span>
<span style="color: #6c3163; font-weight: bold;">ex12</span> <span style="color: #715ab1;">=</span> not (<span style="color: #ba2f59; font-weight: bold;">False</span> <span style="color: #715ab1;">||</span> <span style="color: #ba2f59; font-weight: bold;">True</span>)

<span style="color: #6c3163; font-weight: bold;">ex13</span> <span style="color: #715ab1;">=</span> (<span style="color: #2d9574;">'a'</span> <span style="color: #715ab1;">==</span> <span style="color: #2d9574;">'a'</span>)
<span style="color: #6c3163; font-weight: bold;">ex14</span> <span style="color: #715ab1;">=</span> (16 <span style="color: #715ab1;">/=</span> 3)
<span style="color: #6c3163; font-weight: bold;">ex15</span> <span style="color: #715ab1;">=</span> (5 <span style="color: #715ab1;">&gt;</span> 3) <span style="color: #715ab1;">&amp;&amp;</span> (<span style="color: #2d9574;">'p'</span> <span style="color: #715ab1;">&lt;=</span> <span style="color: #2d9574;">'q'</span>)
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">What is this?</span>
<span style="color: #6c3163; font-weight: bold;">ex16</span> <span style="color: #715ab1;">=</span> <span style="color: #2d9574;">"Haskell"</span> <span style="color: #715ab1;">&gt;</span> <span style="color: #2d9574;">"C++"</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgce8e631" class="outline-4">
<h4 id="orgce8e631"><span class="section-number-4">1.4.5</span> Definisanje osnovnih funkcija</h4>
<div class="outline-text-4" id="text-1-4-5">
<p>
Funkcije se definiÅ¡u na sledeÄi naÄin:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Compute the sum of the integers from 1 to n.</span>
<span style="color: #6c3163; font-weight: bold;">sumtorial</span> <span style="color: #715ab1;">::</span> <span style="color: #ba2f59; font-weight: bold;">Integer</span> <span style="color: #715ab1;">-&gt;</span> <span style="color: #ba2f59; font-weight: bold;">Integer</span>
<span style="color: #6c3163; font-weight: bold;">sumtorial</span> 0 <span style="color: #715ab1;">=</span> 0
<span style="color: #6c3163; font-weight: bold;">sumtorial</span> n <span style="color: #715ab1;">=</span> n <span style="color: #715ab1;">+</span> sumtorial (n<span style="color: #715ab1;">-</span>1)
</pre>
</div>

<p>
<code>Integer -&gt; Integer</code> znaÄi da funkcija prima <code>Integer</code> i vraÄa
<code>Integer</code>.
</p>

<p>
U definiciji funkcije prvi izraz koji odgovara pozivu se
izvrÅ¡ava. Objasnite izvrÅ¡avanje funkcije <code>sumtorial</code>?
</p>

<p>
Izbor poziva takoÄe moÅ¾e biti izraÅ¾en i koriÅ¡Äenjem mehanizma koji
se zove <i>guards</i>:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #6c3163; font-weight: bold;">hailstone</span> <span style="color: #715ab1;">::</span> <span style="color: #ba2f59; font-weight: bold;">Integer</span> <span style="color: #715ab1;">-&gt;</span> <span style="color: #ba2f59; font-weight: bold;">Integer</span>
<span style="color: #6c3163; font-weight: bold;">hailstone</span> n
  <span style="color: #715ab1;">|</span> n <span style="color: #715ab1;">`mod`</span> 2 <span style="color: #715ab1;">==</span> 0 <span style="color: #715ab1;">=</span> n <span style="color: #715ab1;">`div`</span> 2
  <span style="color: #715ab1;">|</span> otherwise      <span style="color: #715ab1;">=</span> 3<span style="color: #715ab1;">*</span>n <span style="color: #715ab1;">+</span> 1
</pre>
</div>

<p>
<i>Guards</i> se izvrÅ¡avaju redom &#x2014; od gore ka dole i prvi izraz koji
se evaluira u <code>True</code> Äe izazvati da se izvrÅ¡i njegova grana
funkcije.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #6c3163; font-weight: bold;">foo</span> <span style="color: #715ab1;">::</span> <span style="color: #ba2f59; font-weight: bold;">Integer</span> <span style="color: #715ab1;">-&gt;</span> <span style="color: #ba2f59; font-weight: bold;">Integer</span>
<span style="color: #6c3163; font-weight: bold;">foo</span> 0 <span style="color: #715ab1;">=</span> 16
<span style="color: #6c3163; font-weight: bold;">foo</span> 1
  <span style="color: #715ab1;">|</span> <span style="color: #2d9574;">"Haskell"</span> <span style="color: #715ab1;">&gt;</span> <span style="color: #2d9574;">"C++"</span> <span style="color: #715ab1;">=</span> 3
  <span style="color: #715ab1;">|</span> otherwise         <span style="color: #715ab1;">=</span> 4
<span style="color: #6c3163; font-weight: bold;">foo</span> n
  <span style="color: #715ab1;">|</span> n <span style="color: #715ab1;">&lt;</span> 0            <span style="color: #715ab1;">=</span> 0
  <span style="color: #715ab1;">|</span> n <span style="color: #715ab1;">`mod`</span> 17 <span style="color: #715ab1;">==</span> 2  <span style="color: #715ab1;">=</span> <span style="color: #715ab1;">-</span>43
  <span style="color: #715ab1;">|</span> otherwise        <span style="color: #715ab1;">=</span> n <span style="color: #715ab1;">+</span> 3
</pre>
</div>

<p>
Å ta Äe biti <code>foo(-3)</code>, <code>foo(0)</code>, <code>foo(1)</code>, <code>foo(36)</code>, <code>foo(38)</code>?
</p>
</div>
</div>

<div id="outline-container-org1e2aad4" class="outline-4">
<h4 id="org1e2aad4"><span class="section-number-4">1.4.6</span> Parovi</h4>
<div class="outline-text-4" id="text-1-4-6">
<p>
Parovi sluÅ¾e da uparimo neke dve informacije. Postoje i ostale
n-torke ali se u praksi uglavnom koriste parovi jer za ostalo
posotje bolji naÄini predstavljanja.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #6c3163; font-weight: bold;">p</span> <span style="color: #715ab1;">::</span> (<span style="color: #ba2f59; font-weight: bold;">Int</span>, [<span style="color: #ba2f59; font-weight: bold;">Char</span>])
<span style="color: #6c3163; font-weight: bold;">p</span> <span style="color: #715ab1;">=</span> (43, <span style="color: #2d9574;">"&#269;estrestridvajestri"</span>)
</pre>
</div>

<p>
Obratiti paÅ¾nju da su n-torke razliÄitihj tipova:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #6c3163; font-weight: bold;">p1</span> <span style="color: #715ab1;">::</span> (<span style="color: #ba2f59; font-weight: bold;">Int</span>, [<span style="color: #ba2f59; font-weight: bold;">Char</span>])
<span style="color: #6c3163; font-weight: bold;">p1</span> <span style="color: #715ab1;">=</span> (1, <span style="color: #2d9574;">"two"</span>)

<span style="color: #6c3163; font-weight: bold;">p2</span> <span style="color: #715ab1;">::</span> (<span style="color: #ba2f59; font-weight: bold;">Integer</span>, [<span style="color: #ba2f59; font-weight: bold;">Char</span>])
<span style="color: #6c3163; font-weight: bold;">p2</span> <span style="color: #715ab1;">=</span> (1, <span style="color: #2d9574;">"two"</span>)

<span style="color: #6c3163; font-weight: bold;">p3</span> <span style="color: #715ab1;">::</span> (<span style="color: #ba2f59; font-weight: bold;">Double</span>, <span style="color: #ba2f59; font-weight: bold;">Double</span>)
<span style="color: #6c3163; font-weight: bold;">p3</span> <span style="color: #715ab1;">=</span> (2.2, 2.2)
</pre>
</div>

<p>
N-torkama se u praksi najÄeÅ¡Äe pristupa <a href="https://en.wikipedia.org/wiki/Pattern_matching">pattern matching</a>-om:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #6c3163; font-weight: bold;">mulPair</span> <span style="color: #715ab1;">::</span> (<span style="color: #ba2f59; font-weight: bold;">Int</span>, <span style="color: #ba2f59; font-weight: bold;">Int</span>) <span style="color: #715ab1;">-&gt;</span> <span style="color: #ba2f59; font-weight: bold;">Int</span>
<span style="color: #6c3163; font-weight: bold;">mulPair</span> (x, y) <span style="color: #715ab1;">=</span> x <span style="color: #715ab1;">*</span> y
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#955;&gt; mulPair (2, 3)</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">6</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org401af12" class="outline-4">
<h4 id="org401af12"><span class="section-number-4">1.4.7</span> Funkcije viÅ¡e argumenata</h4>
<div class="outline-text-4" id="text-1-4-7">
<p>
Funkcija sa viÅ¡e argumenata se definiÅ¡e na sledeÄi naÄin:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #6c3163; font-weight: bold;">multiArgFoo</span> <span style="color: #715ab1;">::</span> <span style="color: #ba2f59; font-weight: bold;">Int</span> <span style="color: #715ab1;">-&gt;</span> <span style="color: #ba2f59; font-weight: bold;">Int</span> <span style="color: #715ab1;">-&gt;</span> <span style="color: #ba2f59; font-weight: bold;">Int</span> <span style="color: #715ab1;">-&gt;</span> <span style="color: #ba2f59; font-weight: bold;">Int</span>
<span style="color: #6c3163; font-weight: bold;">multiArgFoo</span> x y z <span style="color: #715ab1;">=</span> x <span style="color: #715ab1;">*</span> y <span style="color: #715ab1;">*</span> z
<span style="color: #6c3163; font-weight: bold;">sv</span> <span style="color: #715ab1;">=</span> multiArgFoo 1 2 3
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#955;&gt; sv</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">6</span>
</pre>
</div>

<p>
Ako Vam tip funkcije <code>multiArgFoo :: Int -&gt; Int -&gt; Int -&gt; Int</code>
deluje Äudno i pitate se:
</p>

<blockquote>
<p>
ZaÅ¡to ovoliko strelica, funkcija prima 3 parametra i vraÄa jededan
zar ne bi viÅ¡e imalo smisla da bude neÅ¡to kao <code>Int Int Int -&gt; Int</code>?
</p>
</blockquote>

<p>
onda ste na dobrom tragu. Razlog za ovo je dosta dublji od same
sintakse i ima valjan razlog u matematici. Razlog za ovakvu
notaciju je <a href="https://wiki.haskell.org/Currying">Currying</a>.
</p>

<blockquote>
<p>
<i>Currying</i> je proces transformacije funckije koja prima viÅ¡e
argumenata u funckiju koja prima samo jedan argument i vraÄa drugu
funkciju ako su joÅ¡ neki parametri potrebni.
</p>
</blockquote>

<p>
Pa tako:
</p>

<div class="org-src-container">
<pre class="src src-haskell">&#955;<span style="color: #6c3163; font-weight: bold;">&gt;</span> foo <span style="color: #715ab1;">=</span> multiArgFoo 1
&#955;<span style="color: #6c3163; font-weight: bold;">&gt;</span> <span style="color: #ba2f59; font-weight: bold;">:</span>t foo
<span style="color: #6c3163; font-weight: bold;">foo</span> <span style="color: #715ab1;">::</span> <span style="color: #ba2f59; font-weight: bold;">Int</span> <span style="color: #715ab1;">-&gt;</span> <span style="color: #ba2f59; font-weight: bold;">Int</span> <span style="color: #715ab1;">-&gt;</span> <span style="color: #ba2f59; font-weight: bold;">Int</span>
&#955;<span style="color: #6c3163; font-weight: bold;">&gt;</span> foo1 <span style="color: #715ab1;">=</span> foo 2
&#955;<span style="color: #6c3163; font-weight: bold;">&gt;</span> <span style="color: #ba2f59; font-weight: bold;">:</span>t foo1
<span style="color: #6c3163; font-weight: bold;">foo1</span> <span style="color: #715ab1;">::</span> <span style="color: #ba2f59; font-weight: bold;">Int</span> <span style="color: #715ab1;">-&gt;</span> <span style="color: #ba2f59; font-weight: bold;">Int</span>
&#955;<span style="color: #6c3163; font-weight: bold;">&gt;</span> res <span style="color: #715ab1;">=</span> foo1 3
&#955;<span style="color: #6c3163; font-weight: bold;">&gt;</span> <span style="color: #ba2f59; font-weight: bold;">:</span>t res
<span style="color: #6c3163; font-weight: bold;">res</span> <span style="color: #715ab1;">::</span> <span style="color: #ba2f59; font-weight: bold;">Int</span>
&#955;<span style="color: #6c3163; font-weight: bold;">&gt;</span> res
6
</pre>
</div>

<p>
Ovo podseÄa na parcijalnu primenu funkcije ali <span class="underline">to nije baÅ¡
to</span>. Pogledajte ovu diskusiju na <a href="https://stackoverflow.com/questions/218025/what-is-the-difference-between-currying-and-partial-application">StackOverflow</a> (barem prva dva
odgovora).
</p>
</div>
</div>

<div id="outline-container-orgbaa62c9" class="outline-4">
<h4 id="orgbaa62c9"><span class="section-number-4">1.4.8</span> Liste</h4>
<div class="outline-text-4" id="text-1-4-8">
<p>
Liste su jedne od najosnovnih struktura podataka Haskell-a.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #6c3163; font-weight: bold;">nums, range, range2</span> <span style="color: #715ab1;">::</span> [<span style="color: #ba2f59; font-weight: bold;">Integer</span>]
<span style="color: #6c3163; font-weight: bold;">nums</span>   <span style="color: #715ab1;">=</span> [1,2,3,19]
<span style="color: #6c3163; font-weight: bold;">range</span>  <span style="color: #715ab1;">=</span> [1<span style="color: #715ab1;">..</span>100]
<span style="color: #6c3163; font-weight: bold;">range2</span> <span style="color: #715ab1;">=</span> [2,4<span style="color: #715ab1;">..</span>100]
<span style="color: #6c3163; font-weight: bold;">unlimited</span> <span style="color: #715ab1;">=</span> [1<span style="color: #715ab1;">..</span>]

<span style="color: #6c3163; font-weight: bold;">hello1</span> <span style="color: #715ab1;">::</span> [<span style="color: #ba2f59; font-weight: bold;">Char</span>]
<span style="color: #6c3163; font-weight: bold;">hello1</span> <span style="color: #715ab1;">=</span> [<span style="color: #2d9574;">'h'</span>, <span style="color: #2d9574;">'e'</span>, <span style="color: #2d9574;">'l'</span>, <span style="color: #2d9574;">'l'</span>, <span style="color: #2d9574;">'o'</span>]

<span style="color: #6c3163; font-weight: bold;">hello2</span> <span style="color: #715ab1;">::</span> <span style="color: #ba2f59; font-weight: bold;">String</span>
<span style="color: #6c3163; font-weight: bold;">hello2</span> <span style="color: #715ab1;">=</span> <span style="color: #2d9574;">"hello"</span>

<span style="color: #6c3163; font-weight: bold;">helloSame</span> <span style="color: #715ab1;">=</span> hello1 <span style="color: #715ab1;">==</span> hello2
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#955;&gt; helloSame</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">True</span>
</pre>
</div>

<p>
Postoji i <i>list comprehension</i>:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #6c3163; font-weight: bold;">l</span> <span style="color: #715ab1;">=</span>
  [ (x <span style="color: #715ab1;">`mod`</span> 3) <span style="color: #715ab1;">*</span> y
  <span style="color: #715ab1;">|</span> x <span style="color: #715ab1;">&lt;-</span> [1 <span style="color: #715ab1;">..</span> 10]
  , y <span style="color: #715ab1;">&lt;-</span> [2, 4, 40]
  , (x <span style="color: #715ab1;">*</span> y) <span style="color: #715ab1;">`mod`</span> 2 <span style="color: #715ab1;">==</span> 0 ]
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#955;&gt; l</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">[2,4,40,4,8,80,0,0,0,2,4,40,4,8,80,0,0,0,2,4,40,4,8,80,0,0,0,2,4,40]</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org7cde10b" class="outline-4">
<h4 id="org7cde10b"><span class="section-number-4">1.4.9</span> Konstrukcija listi</h4>
<div class="outline-text-4" id="text-1-4-9">
<p>
Sve liste se grade od prazne liste koriÅ¡Äenjem <code>cons</code> operatora
(<code>:</code>). Ovo Vam je moÅ¾da poznato iz Lispa?
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #6c3163; font-weight: bold;">ex18</span> <span style="color: #715ab1;">=</span> 1 <span style="color: #ba2f59; font-weight: bold;">:</span> <span style="color: #ba2f59; font-weight: bold;">[]</span>
<span style="color: #6c3163; font-weight: bold;">ex19</span> <span style="color: #715ab1;">=</span> 3 <span style="color: #ba2f59; font-weight: bold;">:</span> (1 <span style="color: #ba2f59; font-weight: bold;">:</span> <span style="color: #ba2f59; font-weight: bold;">[]</span>)
<span style="color: #6c3163; font-weight: bold;">ex20</span> <span style="color: #715ab1;">=</span> 2 <span style="color: #ba2f59; font-weight: bold;">:</span> 3 <span style="color: #ba2f59; font-weight: bold;">:</span> 4 <span style="color: #ba2f59; font-weight: bold;">:</span> <span style="color: #ba2f59; font-weight: bold;">[]</span>
<span style="color: #6c3163; font-weight: bold;">ex21</span> <span style="color: #715ab1;">=</span> [2,3,4] <span style="color: #715ab1;">==</span> 2 <span style="color: #ba2f59; font-weight: bold;">:</span> 3 <span style="color: #ba2f59; font-weight: bold;">:</span> 4 <span style="color: #ba2f59; font-weight: bold;">:</span> <span style="color: #ba2f59; font-weight: bold;">[]</span>
</pre>
</div>

<p>
Obratite paÅ¾nju da su ovo prave jednostruko spregnute liste a ne
nizovi. Uzgred, Å¡ta je razlika izmeÄu niza i jednostruko spregnute
liste?
</p>
</div>
</div>

<div id="outline-container-org0659a77" class="outline-4">
<h4 id="org0659a77"><span class="section-number-4">1.4.10</span> Funkcije nad listama</h4>
<div class="outline-text-4" id="text-1-4-10">
<p>
Funkcije koje rade sa listama takoÄe koriste <i>pattern matching</i>:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Compute the length of a list of Integers.</span>
<span style="color: #6c3163; font-weight: bold;">intListLength</span> <span style="color: #715ab1;">::</span> [<span style="color: #ba2f59; font-weight: bold;">Integer</span>] <span style="color: #715ab1;">-&gt;</span> <span style="color: #ba2f59; font-weight: bold;">Integer</span>
<span style="color: #6c3163; font-weight: bold;">intListLength</span> <span style="color: #ba2f59; font-weight: bold;">[]</span>     <span style="color: #715ab1;">=</span> 0
<span style="color: #6c3163; font-weight: bold;">intListLength</span> (<span style="color: #3a81c3; font-weight: bold;">_</span><span style="color: #ba2f59; font-weight: bold;">:</span>xs) <span style="color: #715ab1;">=</span> 1 <span style="color: #715ab1;">+</span> intListLength xs
</pre>
</div>

<p>
PoÅ¡to prvi element liste ne koristimo ne moramo ni da koirstimo
ime za njega i zato imamo <code>intListLength (_:xs)</code>. Ovo je
rekurzija, uslov zavrÅ¡etka je dat elegantno zar ne?
</p>

<p>
Paterni mogu da se ugnjeÅ¾davaju:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #6c3163; font-weight: bold;">sumEveryTwo</span> <span style="color: #715ab1;">::</span> [<span style="color: #ba2f59; font-weight: bold;">Integer</span>] <span style="color: #715ab1;">-&gt;</span> [<span style="color: #ba2f59; font-weight: bold;">Integer</span>]
<span style="color: #6c3163; font-weight: bold;">sumEveryTwo</span> <span style="color: #ba2f59; font-weight: bold;">[]</span>         <span style="color: #715ab1;">=</span> <span style="color: #ba2f59; font-weight: bold;">[]</span>     <span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Do nothing to the empty list</span>
<span style="color: #6c3163; font-weight: bold;">sumEveryTwo</span> (x<span style="color: #ba2f59; font-weight: bold;">:[]</span>)     <span style="color: #715ab1;">=</span> [x]    <span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Do nothing to lists with a single element</span>
<span style="color: #6c3163; font-weight: bold;">sumEveryTwo</span> (x<span style="color: #ba2f59; font-weight: bold;">:</span>(y<span style="color: #ba2f59; font-weight: bold;">:</span>zs)) <span style="color: #715ab1;">=</span> (x <span style="color: #715ab1;">+</span> y) <span style="color: #ba2f59; font-weight: bold;">:</span> sumEveryTwo zs
</pre>
</div>
</div>
</div>

<div id="outline-container-orge852d02" class="outline-4">
<h4 id="orge852d02"><span class="section-number-4">1.4.11</span> Kombinovanje funkcija</h4>
<div class="outline-text-4" id="text-1-4-11">
<p>
Haskell kao funckionalan jezik inspiriÅ¡e da reÅ¡enja veÄih problema
gradimo kroz reÅ¡avanje manjih porcija problema. Pa tako kopleksne
funkcije gradimo kombinovanjem jednostavnijijh.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Generate the sequence of hailstone iterations from a starting number.</span>
<span style="color: #6c3163; font-weight: bold;">hailstoneSeq</span> <span style="color: #715ab1;">::</span> <span style="color: #ba2f59; font-weight: bold;">Integer</span> <span style="color: #715ab1;">-&gt;</span> [<span style="color: #ba2f59; font-weight: bold;">Integer</span>]
<span style="color: #6c3163; font-weight: bold;">hailstoneSeq</span> 1 <span style="color: #715ab1;">=</span> [1]
<span style="color: #6c3163; font-weight: bold;">hailstoneSeq</span> n <span style="color: #715ab1;">=</span> n <span style="color: #ba2f59; font-weight: bold;">:</span> hailstoneSeq (hailstone n)

<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">The number of hailstone steps needed to reach 1 from a starting</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">number.</span>
<span style="color: #6c3163; font-weight: bold;">hailstoneLen</span> <span style="color: #715ab1;">::</span> <span style="color: #ba2f59; font-weight: bold;">Integer</span> <span style="color: #715ab1;">-&gt;</span> <span style="color: #ba2f59; font-weight: bold;">Integer</span>
<span style="color: #6c3163; font-weight: bold;">hailstoneLen</span> n <span style="color: #715ab1;">=</span> intListLength (hailstoneSeq n) <span style="color: #715ab1;">-</span> 1
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#955;&gt; hailstoneSeq 100</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">[100,50,25,76,38,19,58,29,88,44,22,11,34,17,52,26,13,40,20,10,5,16,8,4,2,1]</span>
</pre>
</div>

<p>
Kako vam ovo deluje?
</p>

<p>
MoÅ¾da mislite: ovo nije memorijski efikasno, treba da potroÅ¡i
vreme i memoriju da napravi celu <a href="https://en.wikipedia.org/wiki/3x_%2B_1_problem">hailstone</a> sekvencu od <code>n</code> pa onda
da raÄuna njenu duÅ¾inu.
</p>

<p>
Zapravo, zahvaljujuÄi lenjoj eveluaciji Äitavo raÄunanje koristi
<code>O(1)</code> momoriju bez obzira na duÅ¾inu sekvence. Zapravo <span class="underline">skoro</span>
O(n) ali o tome Äe biti reÄi kasnije. Sada moÅ¾ete da probate to u
praksi, probajte:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#955;&gt; hailstoneLen 9</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">19</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#955;&gt; hailstoneLen 9999999999999999999999999999999999999999999999999999999999999</span><span style="color: #6c4173; background-color: #ecf3ec;">99999999</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">2026</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org3538e6e" class="outline-4">
<h4 id="org3538e6e"><span class="section-number-4">1.4.12</span> Pragme</h4>
<div class="outline-text-4" id="text-1-4-12">
<p>
<code>{-# LANGUAGE #-}</code> <code>{-# OPTIONS_GHC #-}</code> <code>{-# INCLUDE #-}</code> <code>{-# INFIX #-}</code>
<code>{-# DEPRECATED #-}</code> <code>{-# WARNING #-}</code> <code>{-# RULES #-}</code>
</p>
</div>
</div>
</div>
<div id="outline-container-org6eaca9b" class="outline-3">
<h3 id="org6eaca9b"><span class="section-number-3">1.5</span> Kompajler (GHC)</h3>
<div class="outline-text-3" id="text-1-5">
<p>
Haskell ima viÅ¡e razliÄitih kompajlera (kao Å¡to C ima GCC,
Clang&#x2026;) ali je <a href="https://www.haskell.org/ghc/">GHC</a> definitivno najkoriÅ¡Äeniji. Sam GHC kao
kompajler je priliÄno pametno dizajniran i predstavlja jedan od
najnaprednijih kompajlera danas. Na ovom kursu koristiÄemo samo GHC
i neÄemo diskutovati o ostalim kompajlerima.
</p>
</div>

<div id="outline-container-org3b603e1" class="outline-4">
<h4 id="org3b603e1"><span class="section-number-4">1.5.1</span> <i>Type inference</i></h4>
<div class="outline-text-4" id="text-1-5-1">
<p>
Haskell je implicitno tipiziran jezik (<i>implicitly-typed</i>) za
razliku od C/C++, Java, C#, Go i dr. koji su eksplicitno
tipizirani (<i>explicitly-typed</i>). To praktiÄno znaÄi da u kodu ne
mora stajati tip za sve izraze veÄ kompajler sam ume da zakljuÄi
tipove. Dakle, tipovi su poznati u vreme kompajliranja (pre
pokretanja porgrama) ali nisu eksplicitno napisani u kodu.
</p>
</div>
</div>
</div>

<div id="outline-container-orgabc0fa8" class="outline-3">
<h3 id="orgabc0fa8"><span class="section-number-3">1.6</span> GHCi</h3>
<div class="outline-text-3" id="text-1-6">
<p>
GHCi je Haskell REPL (ne toliko moÄan kao u Clojure-u zbog statiÄke
prirode Haskell-a). Listu opcija koju pruÅ¾a moÅ¾ete naÄi sa <code>:?</code>:
</p>

<div class="org-src-container">
<pre class="src src-haskell">&#955;<span style="color: #6c3163; font-weight: bold;">&gt;</span> <span style="color: #ba2f59; font-weight: bold;">:?</span>
 <span style="color: #ba2f59; font-weight: bold;">Commands</span> available from the prompt<span style="color: #ba2f59; font-weight: bold;">:</span>

   <span style="color: #715ab1;">&lt;</span>statement<span style="color: #715ab1;">&gt;</span>                 evaluate<span style="color: #715ab1;">/</span>run <span style="color: #715ab1;">&lt;</span>statement<span style="color: #715ab1;">&gt;</span>
   <span style="color: #ba2f59; font-weight: bold;">:</span>                           repeat last command
   <span style="color: #ba2f59; font-weight: bold;">:</span>{<span style="color: #715ab1;">\</span>n <span style="color: #715ab1;">..</span>lines<span style="color: #715ab1;">..</span> <span style="color: #715ab1;">\</span>n<span style="color: #ba2f59; font-weight: bold;">:</span>}<span style="color: #715ab1;">\</span>n       multiline command
   <span style="color: #ba2f59; font-weight: bold;">:</span>add [<span style="color: #715ab1;">*</span>]<span style="color: #715ab1;">&lt;</span><span style="color: #3a81c3; font-weight: bold;">module</span><span style="color: #715ab1;">&gt;</span> <span style="color: #715ab1;">...</span>        add <span style="color: #3a81c3; font-weight: bold;">module</span>(s) to the current target set
   <span style="color: #ba2f59; font-weight: bold;">:</span>browse[<span style="color: #715ab1;">!</span>] [[<span style="color: #715ab1;">*</span>]<span style="color: #715ab1;">&lt;</span>mod<span style="color: #715ab1;">&gt;</span>]       display the names defined by <span style="color: #3a81c3; font-weight: bold;">module</span> <span style="color: #715ab1;">&lt;</span>mod<span style="color: #715ab1;">&gt;</span>
                               (<span style="color: #715ab1;">!:</span> more details; <span style="color: #715ab1;">*:</span> all top<span style="color: #715ab1;">-</span>level names)
   <span style="color: #ba2f59; font-weight: bold;">:</span>cd <span style="color: #715ab1;">&lt;</span>dir<span style="color: #715ab1;">&gt;</span>                   change directory to <span style="color: #715ab1;">&lt;</span>dir<span style="color: #715ab1;">&gt;</span>
   <span style="color: #ba2f59; font-weight: bold;">:</span>cmd <span style="color: #715ab1;">&lt;</span>expr<span style="color: #715ab1;">&gt;</span>                 run the commands returned by <span style="color: #715ab1;">&lt;</span>expr<span style="color: #715ab1;">&gt;::</span><span style="color: #ba2f59; font-weight: bold;">IO</span> <span style="color: #ba2f59; font-weight: bold;">String</span>
   <span style="color: #ba2f59; font-weight: bold;">:</span>complete <span style="color: #715ab1;">&lt;</span>dom<span style="color: #715ab1;">&gt;</span> [<span style="color: #715ab1;">&lt;</span>rng<span style="color: #715ab1;">&gt;</span>] <span style="color: #715ab1;">&lt;</span>s<span style="color: #715ab1;">&gt;</span> list completions for partial input string
   <span style="color: #ba2f59; font-weight: bold;">:</span>ctags[<span style="color: #715ab1;">!</span>] [<span style="color: #715ab1;">&lt;</span>file<span style="color: #715ab1;">&gt;</span>]          create tags file <span style="color: #715ab1;">&lt;</span>file<span style="color: #715ab1;">&gt;</span> for <span style="color: #ba2f59; font-weight: bold;">Vi</span> (<span style="color: #3a81c3; font-weight: bold;">default</span><span style="color: #ba2f59; font-weight: bold;">:</span> <span style="color: #2d9574;">"tags"</span>)
                               (<span style="color: #715ab1;">!:</span> use regex instead <span style="color: #3a81c3; font-weight: bold;">of</span> line number)
   <span style="color: #ba2f59; font-weight: bold;">:</span>def <span style="color: #715ab1;">&lt;</span>cmd<span style="color: #715ab1;">&gt;</span> <span style="color: #715ab1;">&lt;</span>expr<span style="color: #715ab1;">&gt;</span>           define command <span style="color: #ba2f59; font-weight: bold;">:&lt;</span>cmd<span style="color: #715ab1;">&gt;</span> (later defined command has
                               precedence, <span style="color: #ba2f59; font-weight: bold;">::&lt;</span>cmd<span style="color: #715ab1;">&gt;</span> is always a builtin command)
   <span style="color: #ba2f59; font-weight: bold;">:</span>edit <span style="color: #715ab1;">&lt;</span>file<span style="color: #715ab1;">&gt;</span>                edit file
   <span style="color: #ba2f59; font-weight: bold;">:</span>edit                       edit last <span style="color: #3a81c3; font-weight: bold;">module</span>
   <span style="color: #ba2f59; font-weight: bold;">:</span>etags [<span style="color: #715ab1;">&lt;</span>file<span style="color: #715ab1;">&gt;</span>]             create tags file <span style="color: #715ab1;">&lt;</span>file<span style="color: #715ab1;">&gt;</span> for <span style="color: #ba2f59; font-weight: bold;">Emacs</span> (<span style="color: #3a81c3; font-weight: bold;">default</span><span style="color: #ba2f59; font-weight: bold;">:</span> <span style="color: #2d9574;">"TAGS</span><span style="color: #6c4173;">"</span><span style="color: #6c4173;">)</span>
   <span style="color: #ba2f59; font-weight: bold;">:</span>help, <span style="color: #ba2f59; font-weight: bold;">:?</span>                   display this list <span style="color: #3a81c3; font-weight: bold;">of</span> commands
   <span style="color: #ba2f59; font-weight: bold;">:</span>info[<span style="color: #715ab1;">!</span>] [<span style="color: #715ab1;">&lt;</span>name<span style="color: #715ab1;">&gt;</span> <span style="color: #715ab1;">...</span>]       display information about the given names
                               (<span style="color: #715ab1;">!:</span> <span style="color: #3a81c3; font-weight: bold;">do</span> not filter instances)
   <span style="color: #ba2f59; font-weight: bold;">:</span>issafe [<span style="color: #715ab1;">&lt;</span>mod<span style="color: #715ab1;">&gt;</span>]             display safe haskell information <span style="color: #3a81c3; font-weight: bold;">of</span> <span style="color: #3a81c3; font-weight: bold;">module</span> <span style="color: #715ab1;">&lt;</span>mod<span style="color: #715ab1;">&gt;</span>
   <span style="color: #ba2f59; font-weight: bold;">:</span>kind[<span style="color: #715ab1;">!</span>] <span style="color: #715ab1;">&lt;</span><span style="color: #3a81c3; font-weight: bold;">type</span><span style="color: #715ab1;">&gt;</span>             show the kind <span style="color: #3a81c3; font-weight: bold;">of</span> <span style="color: #715ab1;">&lt;</span><span style="color: #3a81c3; font-weight: bold;">type</span><span style="color: #715ab1;">&gt;</span>
                               (<span style="color: #715ab1;">!:</span> also print the normalised <span style="color: #3a81c3; font-weight: bold;">type</span>)
   <span style="color: #ba2f59; font-weight: bold;">:</span>load[<span style="color: #715ab1;">!</span>] [<span style="color: #715ab1;">*</span>]<span style="color: #715ab1;">&lt;</span><span style="color: #3a81c3; font-weight: bold;">module</span><span style="color: #715ab1;">&gt;</span> <span style="color: #715ab1;">...</span>    load <span style="color: #3a81c3; font-weight: bold;">module</span>(s) and their dependents
                               (<span style="color: #715ab1;">!:</span> defer <span style="color: #3a81c3; font-weight: bold;">type</span> errors)
   <span style="color: #ba2f59; font-weight: bold;">:</span>main [<span style="color: #715ab1;">&lt;</span>arguments<span style="color: #715ab1;">&gt;</span> <span style="color: #715ab1;">...</span>]     run the main function with the given arguments
   <span style="color: #ba2f59; font-weight: bold;">:</span><span style="color: #3a81c3; font-weight: bold;">module</span> [<span style="color: #715ab1;">+/-</span>] [<span style="color: #715ab1;">*</span>]<span style="color: #715ab1;">&lt;</span>mod<span style="color: #715ab1;">&gt;</span> <span style="color: #715ab1;">...</span>  set the context for expression evaluation
   <span style="color: #ba2f59; font-weight: bold;">:</span>quit                       exit <span style="color: #ba2f59; font-weight: bold;">GHCi</span>
   <span style="color: #ba2f59; font-weight: bold;">:</span>reload[<span style="color: #715ab1;">!</span>]                  reload the current <span style="color: #3a81c3; font-weight: bold;">module</span> set
                               (<span style="color: #715ab1;">!:</span> defer <span style="color: #3a81c3; font-weight: bold;">type</span> errors)
   <span style="color: #ba2f59; font-weight: bold;">:</span>run function [<span style="color: #715ab1;">&lt;</span>arguments<span style="color: #715ab1;">&gt;</span> <span style="color: #715ab1;">...</span>] run the function with the given arguments
   <span style="color: #ba2f59; font-weight: bold;">:</span>script <span style="color: #715ab1;">&lt;</span>file<span style="color: #715ab1;">&gt;</span>              run the script <span style="color: #715ab1;">&lt;</span>file<span style="color: #715ab1;">&gt;</span>
   <span style="color: #ba2f59; font-weight: bold;">:</span><span style="color: #3a81c3; font-weight: bold;">type</span> <span style="color: #715ab1;">&lt;</span>expr<span style="color: #715ab1;">&gt;</span>                show the <span style="color: #3a81c3; font-weight: bold;">type</span> <span style="color: #3a81c3; font-weight: bold;">of</span> <span style="color: #715ab1;">&lt;</span>expr<span style="color: #715ab1;">&gt;</span>
   <span style="color: #ba2f59; font-weight: bold;">:</span>undef <span style="color: #715ab1;">&lt;</span>cmd<span style="color: #715ab1;">&gt;</span>                undefine user<span style="color: #715ab1;">-</span>defined command <span style="color: #ba2f59; font-weight: bold;">:&lt;</span>cmd<span style="color: #715ab1;">&gt;</span>
   <span style="color: #ba2f59; font-weight: bold;">:!&lt;</span>command<span style="color: #715ab1;">&gt;</span>                 run the shell command <span style="color: #715ab1;">&lt;</span>command<span style="color: #715ab1;">&gt;</span>

 <span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Commands for debugging:</span>

   <span style="color: #ba2f59; font-weight: bold;">:</span>abandon                    at a breakpoint, abandon current computation
   <span style="color: #ba2f59; font-weight: bold;">:</span>back [<span style="color: #715ab1;">&lt;</span>n<span style="color: #715ab1;">&gt;</span>]                 go back <span style="color: #3a81c3; font-weight: bold;">in</span> the history <span style="color: #ba2f59; font-weight: bold;">N</span> steps (after <span style="color: #ba2f59; font-weight: bold;">:</span>trace)
   <span style="color: #ba2f59; font-weight: bold;">:</span>break [<span style="color: #715ab1;">&lt;</span>mod<span style="color: #715ab1;">&gt;</span>] <span style="color: #715ab1;">&lt;</span>l<span style="color: #715ab1;">&gt;</span> [<span style="color: #715ab1;">&lt;</span>col<span style="color: #715ab1;">&gt;</span>]  set a breakpoint at the specified location
   <span style="color: #ba2f59; font-weight: bold;">:</span>break <span style="color: #715ab1;">&lt;</span>name<span style="color: #715ab1;">&gt;</span>               set a breakpoint on the specified function
   <span style="color: #ba2f59; font-weight: bold;">:</span>continue                   resume after a breakpoint
   <span style="color: #ba2f59; font-weight: bold;">:</span>delete <span style="color: #715ab1;">&lt;</span>number<span style="color: #715ab1;">&gt;</span>            delete the specified breakpoint
   <span style="color: #ba2f59; font-weight: bold;">:</span>delete <span style="color: #715ab1;">*</span>                   delete all breakpoints
   <span style="color: #ba2f59; font-weight: bold;">:</span>force <span style="color: #715ab1;">&lt;</span>expr<span style="color: #715ab1;">&gt;</span>               print <span style="color: #715ab1;">&lt;</span>expr<span style="color: #715ab1;">&gt;</span>, forcing unevaluated parts
   <span style="color: #ba2f59; font-weight: bold;">:</span>forward [<span style="color: #715ab1;">&lt;</span>n<span style="color: #715ab1;">&gt;</span>]              go forward <span style="color: #3a81c3; font-weight: bold;">in</span> the history <span style="color: #ba2f59; font-weight: bold;">N</span> step s(after <span style="color: #ba2f59; font-weight: bold;">:</span>back)
   <span style="color: #ba2f59; font-weight: bold;">:</span>history [<span style="color: #715ab1;">&lt;</span>n<span style="color: #715ab1;">&gt;</span>]              after <span style="color: #ba2f59; font-weight: bold;">:</span>trace, show the execution history
   <span style="color: #ba2f59; font-weight: bold;">:</span>list                       show the source code around current breakpoint
   <span style="color: #ba2f59; font-weight: bold;">:</span>list <span style="color: #715ab1;">&lt;</span>identifier<span style="color: #715ab1;">&gt;</span>          show the source code for <span style="color: #715ab1;">&lt;</span>identifier<span style="color: #715ab1;">&gt;</span>
   <span style="color: #ba2f59; font-weight: bold;">:</span>list [<span style="color: #715ab1;">&lt;</span><span style="color: #3a81c3; font-weight: bold;">module</span><span style="color: #715ab1;">&gt;</span>] <span style="color: #715ab1;">&lt;</span>line<span style="color: #715ab1;">&gt;</span>     show the source code around line number <span style="color: #715ab1;">&lt;</span>line<span style="color: #715ab1;">&gt;</span>
   <span style="color: #ba2f59; font-weight: bold;">:</span>print [<span style="color: #715ab1;">&lt;</span>name<span style="color: #715ab1;">&gt;</span> <span style="color: #715ab1;">...</span>]         show a value without forcing its computation
   <span style="color: #ba2f59; font-weight: bold;">:</span>sprint [<span style="color: #715ab1;">&lt;</span>name<span style="color: #715ab1;">&gt;</span> <span style="color: #715ab1;">...</span>]        simplified version <span style="color: #3a81c3; font-weight: bold;">of</span> <span style="color: #ba2f59; font-weight: bold;">:</span>print
   <span style="color: #ba2f59; font-weight: bold;">:</span>step                       single<span style="color: #715ab1;">-</span>step after stopping at a breakpoint
   <span style="color: #ba2f59; font-weight: bold;">:</span>step <span style="color: #715ab1;">&lt;</span>expr<span style="color: #715ab1;">&gt;</span>                single<span style="color: #715ab1;">-</span>step into <span style="color: #715ab1;">&lt;</span>expr<span style="color: #715ab1;">&gt;</span>
   <span style="color: #ba2f59; font-weight: bold;">:</span>steplocal                  single<span style="color: #715ab1;">-</span>step within the current top<span style="color: #715ab1;">-</span>level binding
   <span style="color: #ba2f59; font-weight: bold;">:</span>stepmodule                 single<span style="color: #715ab1;">-</span>step restricted to the current <span style="color: #3a81c3; font-weight: bold;">module</span>
   <span style="color: #ba2f59; font-weight: bold;">:</span>trace                      trace after stopping at a breakpoint
   <span style="color: #ba2f59; font-weight: bold;">:</span>trace <span style="color: #715ab1;">&lt;</span>expr<span style="color: #715ab1;">&gt;</span>               evaluate <span style="color: #715ab1;">&lt;</span>expr<span style="color: #715ab1;">&gt;</span> with tracing on (see <span style="color: #ba2f59; font-weight: bold;">:</span>history)

 <span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Commands for changing settings:</span>

   <span style="color: #ba2f59; font-weight: bold;">:</span>set <span style="color: #715ab1;">&lt;</span>option<span style="color: #715ab1;">&gt;</span> <span style="color: #715ab1;">...</span>           set options
   <span style="color: #ba2f59; font-weight: bold;">:</span>seti <span style="color: #715ab1;">&lt;</span>option<span style="color: #715ab1;">&gt;</span> <span style="color: #715ab1;">...</span>          set options for interactive evaluation only
   <span style="color: #ba2f59; font-weight: bold;">:</span>set args <span style="color: #715ab1;">&lt;</span>arg<span style="color: #715ab1;">&gt;</span> <span style="color: #715ab1;">...</span>         set the arguments returned by System.getArgs
   <span style="color: #ba2f59; font-weight: bold;">:</span>set prog <span style="color: #715ab1;">&lt;</span>progname<span style="color: #715ab1;">&gt;</span>        set the value returned by System.getProgName
   <span style="color: #ba2f59; font-weight: bold;">:</span>set prompt <span style="color: #715ab1;">&lt;</span>prompt<span style="color: #715ab1;">&gt;</span>        set the prompt used <span style="color: #3a81c3; font-weight: bold;">in</span> <span style="color: #ba2f59; font-weight: bold;">GHCi</span>
   <span style="color: #ba2f59; font-weight: bold;">:</span>set prompt2 <span style="color: #715ab1;">&lt;</span>prompt<span style="color: #715ab1;">&gt;</span>       set the continuation prompt used <span style="color: #3a81c3; font-weight: bold;">in</span> <span style="color: #ba2f59; font-weight: bold;">GHCi</span>
   <span style="color: #ba2f59; font-weight: bold;">:</span>set editor <span style="color: #715ab1;">&lt;</span>cmd<span style="color: #715ab1;">&gt;</span>           set the command used for <span style="color: #ba2f59; font-weight: bold;">:</span>edit
   <span style="color: #ba2f59; font-weight: bold;">:</span>set stop [<span style="color: #715ab1;">&lt;</span>n<span style="color: #715ab1;">&gt;</span>] <span style="color: #715ab1;">&lt;</span>cmd<span style="color: #715ab1;">&gt;</span>       set the command to run when a breakpoint is hit
   <span style="color: #ba2f59; font-weight: bold;">:</span>unset <span style="color: #715ab1;">&lt;</span>option<span style="color: #715ab1;">&gt;</span> <span style="color: #715ab1;">...</span>         unset options

  <span style="color: #ba2f59; font-weight: bold;">Options</span> for '<span style="color: #ba2f59; font-weight: bold;">:</span>set' and '<span style="color: #ba2f59; font-weight: bold;">:</span>unset'<span style="color: #ba2f59; font-weight: bold;">:</span>

    <span style="color: #715ab1;">+</span>m            allow multiline commands
    <span style="color: #715ab1;">+</span>r            revert top<span style="color: #715ab1;">-</span>level expressions after each evaluation
    <span style="color: #715ab1;">+</span>s            print timing<span style="color: #715ab1;">/</span>memory stats after each evaluation
    <span style="color: #715ab1;">+</span>t            print <span style="color: #3a81c3; font-weight: bold;">type</span> after evaluation
    <span style="color: #715ab1;">+</span>c            collect <span style="color: #3a81c3; font-weight: bold;">type</span><span style="color: #715ab1;">/</span>location info after loading modules
    <span style="color: #715ab1;">-&lt;</span>flags<span style="color: #715ab1;">&gt;</span>      most <span style="color: #ba2f59; font-weight: bold;">GHC</span> command line flags can also be set here
                         (eg<span style="color: #715ab1;">.</span> <span style="color: #715ab1;">-</span>v2, <span style="color: #715ab1;">-</span><span style="color: #ba2f59; font-weight: bold;">XFlexibleInstances</span>, etc<span style="color: #715ab1;">.</span>)
                    for <span style="color: #ba2f59; font-weight: bold;">GHCi</span><span style="color: #715ab1;">-</span>specific flags, see <span style="color: #ba2f59; font-weight: bold;">User's</span> <span style="color: #ba2f59; font-weight: bold;">Guide</span>,
                    <span style="color: #ba2f59; font-weight: bold;">Flag</span> reference, <span style="color: #ba2f59; font-weight: bold;">Interactive</span><span style="color: #715ab1;">-</span>mode options

 <span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Commands for displaying information:</span>

   <span style="color: #ba2f59; font-weight: bold;">:</span>show bindings              show the current bindings made at the prompt
   <span style="color: #ba2f59; font-weight: bold;">:</span>show breaks                show the active breakpoints
   <span style="color: #ba2f59; font-weight: bold;">:</span>show context               show the breakpoint context
   <span style="color: #ba2f59; font-weight: bold;">:</span>show imports               show the current imports
   <span style="color: #ba2f59; font-weight: bold;">:</span>show linker                show current linker state
   <span style="color: #ba2f59; font-weight: bold;">:</span>show modules               show the currently loaded modules
   <span style="color: #ba2f59; font-weight: bold;">:</span>show packages              show the currently active package flags
   <span style="color: #ba2f59; font-weight: bold;">:</span>show paths                 show the currently active search paths
   <span style="color: #ba2f59; font-weight: bold;">:</span>show language              show the currently active language flags
   <span style="color: #ba2f59; font-weight: bold;">:</span>show <span style="color: #715ab1;">&lt;</span>setting<span style="color: #715ab1;">&gt;</span>             show value <span style="color: #3a81c3; font-weight: bold;">of</span> <span style="color: #715ab1;">&lt;</span>setting<span style="color: #715ab1;">&gt;</span>, which is one <span style="color: #3a81c3; font-weight: bold;">of</span>
                                  [args, prog, prompt, editor, stop]
   <span style="color: #ba2f59; font-weight: bold;">:</span>showi language             show language flags for interactive evaluation

</pre>
</div>
</div>
</div>
<div id="outline-container-orgdd83268" class="outline-3">
<h3 id="orgdd83268"><span class="section-number-3">1.7</span> IDE</h3>
<div class="outline-text-3" id="text-1-7">
<p>
Haskell je podrÅ¾an u svim u poznatijim razvojnim alatima.
</p>

<ul class="org-ul">
<li>Emacs
<ul class="org-ul">
<li><a href="https://github.com/haskell/haskell-mode">haskell-mode</a>, <a href="https://github.com/commercialhaskell/intero">intero</a> i drugi dodatni paketi po ukusu</li>
<li>za ljude koji poÄinju sa Emacs-om preporuÄujem <a href="http://spacemacs.org/">Spacemacs</a> koji
veÄ ima <a href="https://github.com/syl20bnr/spacemacs/tree/master/layers/%2Blang/haskell">sloj</a> za Haskell u kome su standardni alati veÄ
podeÅ¡eni.</li>
</ul></li>
<li>Vim <a href="https://github.com/begriffs/haskell-vim-now">haskell-vim-now</a></li>
<li>Eclipse <a href="http://eclipsefp.github.io/">EclipseFP</a></li>
<li>IntelliJ <a href="https://github.com/rikvdkleij/intellij-haskell">intellij-haskell</a></li>
<li>Atom <a href="https://atom.io/packages/ide-haskell">ide-haskell</a></li>
<li><a href="http://leksah.org/">Leksah</a></li>
</ul>
</div>

<div id="outline-container-orgf3233ee" class="outline-4">
<h4 id="orgf3233ee"><span class="section-number-4">1.7.1</span> Hoogle</h4>
<div class="outline-text-4" id="text-1-7-1">
<p>
<a href="https://www.haskell.org/hoogle/">Hoogle</a> je sajt na kome moÅ¾ete pretraÅ¾ivati dokumentaciju. PodrÅ¾ava
jezik za postavljanje upita. MoÅ¾e se veoma jednostavno pokretati i
u lokalu.
</p>
</div>
</div>

<div id="outline-container-org3ab13c6" class="outline-4">
<h4 id="org3ab13c6"><span class="section-number-4">1.7.2</span> Stack &amp; Stackage</h4>
<div class="outline-text-4" id="text-1-7-2">
<p>
<a href="https://docs.haskellstack.org/en/stable/README/">Stack</a> je standardan <i>build tool</i> i <i>dependency manager</i>. Projekti
sa kodom koji vidite u ovoj prezentaciji a koji su dostupni na
<a href="https://github.com/NapredneTehnikeProgramiranja/haskellNTP">GitHub-u</a> su pod kontrolom Stack-a. Pojednostavljuje rad sa
Haskell-om tako da viÅ¡e liÄi na proces razvoja softvera u
Python-u, JavaScript-u, Javi&#x2026; PreporuÄujem ga pre <a href="https://www.haskell.org/platform/"><i>haskell
platform</i></a>-e.
</p>

<p>
<a href="https://www.stackage.org/">Stackage</a> je centralni repozitorijum koji koristi Stack. Njihov
odnos je sliÄan odnosu <i>PIP</i>-a i <i>PyPI</i>-a u Python svetu.
</p>
</div>
</div>
</div>

<div id="outline-container-org639b982" class="outline-3">
<h3 id="org639b982"><span class="section-number-3">1.8</span> Äitanje poruka o greÅ¡ci</h3>
<div class="outline-text-3" id="text-1-8">
<p>
Nemojte se plaÅ¡iti poruka o greÅ¡ci.
</p>

<p>
<b>GHC-ove poruke o greÅ¡ci nisu duge nego su informativne.</b>
</p>

<p>
Poruke o greÅ¡ci sadrÅ¾e mnogo informacija iz kojih vidite zaÅ¡to
neÅ¡to "nije po volji" kompajlera. Iz tih greÅ¡aka, ako umete da ih
Äitate, moÅ¾ete da nauÄite bitne stvari.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">x ++ "string"</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&lt;interactive&gt;:105:1: error:</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">--     </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#8226; Couldn't match expected type &#8216;[Char]&#8217; with actual type &#8216;Int&#8217;</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">--     </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#8226; In the first argument of &#8216;(++)&#8217;, namely &#8216;x&#8217;</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">--       </span><span style="color: #2aa1ae; background-color: #ecf3ec;">In the expression: x ++ "string"</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">--       </span><span style="color: #2aa1ae; background-color: #ecf3ec;">In an equation for &#8216;it&#8217;: it = x ++ "string"</span>
</pre>
</div>

<p>
Å ta kaÅ¾e ova greÅ¡ka?
</p>

<ul class="org-ul">
<li>OÄeluje se <code>[Char]</code> tip, a naÄen je <code>Int</code></li>
<li>kod prvog argumenta funkcije <code>(++)</code>, taÄnije <code>x</code>.</li>
<li>u izrazu <code>x ++ "string"</code></li>
<li>u jednaÄini za (<code>it</code> je variabla koja Äe uvek imati vrednost
izraza koju ste predhodno uneli u GHCi): <code>it = x ++ "string"</code></li>
</ul>
</div>
</div>

<div id="outline-container-org979f452" class="outline-3">
<h3 id="org979f452"><span class="section-number-3">1.9</span> OgraniÄenja GHC kompajlera&#xa0;&#xa0;&#xa0;<span class="tag"><span class="za_radoznale">za_radoznale</span></span></h3>
<div class="outline-text-3" id="text-1-9">
</div>
<div id="outline-container-org49c8803" class="outline-4">
<h4 id="org49c8803"><span class="section-number-4">1.9.1</span> Monomorfizam restrikcija</h4>
<div class="outline-text-4" id="text-1-9-1">
<p>
<a href="https://wiki.haskell.org/Monomorphism_restriction">https://wiki.haskell.org/Monomorphism_restriction</a>
</p>
</div>
</div>
</div>

<div id="outline-container-orge4e35a1" class="outline-3">
<h3 id="orge4e35a1"><span class="section-number-3">1.10</span> Zadaci 1</h3>
<div class="outline-text-3" id="text-1-10">
<p>
Na kursu <a href="http://www.seas.upenn.edu/~cis194/spring13/hw/01-intro.pdf">cis194</a> su data dva zadatka, smatram ih vrlo ilustrativnim
za uvod u Haskell :)
</p>

<ol class="org-ol">
<li>Napisati funkciju <code>validate</code> za validiranje broja platne kartice</li>
<li>Napisati funkciju <code>hanoi</code> koja prima broj diskova <a href="https://en.wikipedia.org/wiki/Tower_of_Hanoi">Hanoi</a> tornjeva
i daje listu poteza koje treba preduzeti da bi se diskovi
pravilno preneli sa jednog na drugi toranj.</li>
</ol>
</div>
</div>
</div>

<div id="outline-container-org4c48fce" class="outline-2">
<h2 id="org4c48fce"><span class="section-number-2">2</span> Funkcije</h2>
<div class="outline-text-2" id="text-2">
<p>
Funkcije se piÅ¡u sliÄno kao u matematici. O Haskell funkcijama treba
razmiÅ¡ljati viÅ¡e na matematiÄki naÄin a menje kao o
procedurama/rutinama u proceduralnom programiranju:
</p>

<div class="org-src-container">
<pre class="src src-haskell">(fooIme <span style="color: #715ab1;">::</span> <span style="color: #715ab1;">&lt;</span>izraz_za_tip<span style="color: #715ab1;">&gt;</span>)<span style="color: #715ab1;">?</span>
(<span style="color: #715ab1;">&lt;</span>definicija_za_fooIme<span style="color: #715ab1;">&gt;</span>)<span style="color: #715ab1;">+</span>
</pre>
</div>

<p>
Primer jedne funkcije:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #6c3163; font-weight: bold;">aFoo</span> <span style="color: #715ab1;">::</span> (<span style="color: #ba2f59; font-weight: bold;">String</span>, <span style="color: #ba2f59; font-weight: bold;">Integer</span>) <span style="color: #715ab1;">-&gt;</span> [<span style="color: #ba2f59; font-weight: bold;">Integer</span>] <span style="color: #715ab1;">-&gt;</span> [<span style="color: #ba2f59; font-weight: bold;">Integer</span>]
<span style="color: #6c3163; font-weight: bold;">aFoo</span> <span style="color: #3a81c3; font-weight: bold;">_</span> <span style="color: #ba2f59; font-weight: bold;">[]</span>      <span style="color: #715ab1;">=</span> <span style="color: #ba2f59; font-weight: bold;">[]</span>
<span style="color: #6c3163; font-weight: bold;">aFoo</span> (x, xx) y <span style="color: #715ab1;">=</span> map (<span style="color: #715ab1;">*</span> xx) y
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#955;&gt; aFoo ("dsa", 22) [1,2,3]</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">[22,44,66]</span>
</pre>
</div>

<p>
Funkcije podrÅ¾avaju <i>pattern matching</i>. Funkcije se Äesto piÅ¡u uz
koriÅ¡Äenje <i>guards</i> mehanizma. <code>case</code> izraz se retko koristi za
rukovanje parametrima funkcije jer za njim retko ima potrebe. <code>case</code>
izraz takoÄe podrÅ¾ava <i>pattern matching</i>.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #6c3163; font-weight: bold;">aFoo1</span> <span style="color: #3a81c3; font-weight: bold;">_</span> <span style="color: #ba2f59; font-weight: bold;">[]</span> <span style="color: #715ab1;">=</span> <span style="color: #ba2f59; font-weight: bold;">[]</span>
<span style="color: #6c3163; font-weight: bold;">aFoo1</span> (x, xx) y <span style="color: #715ab1;">=</span>
  <span style="color: #3a81c3; font-weight: bold;">case</span> y <span style="color: #3a81c3; font-weight: bold;">of</span>
    y<span style="color: #ba2f59; font-weight: bold;">:[]</span>      <span style="color: #715ab1;">-&gt;</span> [y]
    otherwise <span style="color: #715ab1;">-&gt;</span> map (<span style="color: #715ab1;">*</span> xx) y
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#955;&gt; aFoo1 ("", 2) [3]</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">[3]</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#955;&gt; aFoo1 ("", 2) [3, 4, 5]</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">[6,8,10]</span>
</pre>
</div>

<p>
<code>case</code> izraz moÅ¾e da koristi <i>quards</i>:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #6c3163; font-weight: bold;">aFoo2</span> <span style="color: #715ab1;">::</span> (<span style="color: #ba2f59; font-weight: bold;">String</span>, <span style="color: #ba2f59; font-weight: bold;">Integer</span>) <span style="color: #715ab1;">-&gt;</span> [<span style="color: #ba2f59; font-weight: bold;">Integer</span>] <span style="color: #715ab1;">-&gt;</span> [<span style="color: #ba2f59; font-weight: bold;">Integer</span>]
<span style="color: #6c3163; font-weight: bold;">aFoo2</span> <span style="color: #3a81c3; font-weight: bold;">_</span> <span style="color: #ba2f59; font-weight: bold;">[]</span> <span style="color: #715ab1;">=</span> <span style="color: #ba2f59; font-weight: bold;">[]</span>
<span style="color: #6c3163; font-weight: bold;">aFoo2</span> (<span style="color: #3a81c3; font-weight: bold;">_</span>, xx) y <span style="color: #715ab1;">=</span>
  <span style="color: #3a81c3; font-weight: bold;">case</span> y <span style="color: #3a81c3; font-weight: bold;">of</span>
    <span style="color: #3a81c3; font-weight: bold;">_</span>
      <span style="color: #715ab1;">|</span> length y <span style="color: #715ab1;">==</span> 1 <span style="color: #715ab1;">-&gt;</span> y
      <span style="color: #715ab1;">|</span> otherwise <span style="color: #715ab1;">-&gt;</span> map (<span style="color: #715ab1;">*</span> xx) y
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#955;&gt; aFoo2 ("", 2) [3]</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">[3]</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#955;&gt; aFoo2 ("", 2) [3, 4, 5]</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">[6,8,10]</span>
</pre>
</div>

<p>
<code>case</code> moÅ¾e da kombinuje <i>pattern matching</i> i <i>quards</i>:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #6c3163; font-weight: bold;">aFoo3</span> <span style="color: #715ab1;">::</span> (<span style="color: #ba2f59; font-weight: bold;">String</span>, <span style="color: #ba2f59; font-weight: bold;">Integer</span>) <span style="color: #715ab1;">-&gt;</span> [<span style="color: #ba2f59; font-weight: bold;">Integer</span>] <span style="color: #715ab1;">-&gt;</span> [<span style="color: #ba2f59; font-weight: bold;">Integer</span>]
<span style="color: #6c3163; font-weight: bold;">aFoo3</span> (<span style="color: #3a81c3; font-weight: bold;">_</span>, xx) y <span style="color: #715ab1;">=</span>
  <span style="color: #3a81c3; font-weight: bold;">case</span> y <span style="color: #3a81c3; font-weight: bold;">of</span>
    <span style="color: #ba2f59; font-weight: bold;">[]</span> <span style="color: #715ab1;">-&gt;</span> <span style="color: #ba2f59; font-weight: bold;">[]</span>
    y<span style="color: #ba2f59; font-weight: bold;">:</span>ys
      <span style="color: #715ab1;">|</span> length ys <span style="color: #715ab1;">==</span> 0 <span style="color: #715ab1;">-&gt;</span> [y]
    otherwise <span style="color: #715ab1;">-&gt;</span> map (<span style="color: #715ab1;">*</span> xx) y
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#955;&gt; aFoo3 ("", 2) [3]</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">[3]</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#955;&gt; aFoo3 ("", 2) [3, 4, 5]</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">[6,8,10]</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org27c61ea" class="outline-2">
<h2 id="org27c61ea"><span class="section-number-2">3</span> Data deklaracije</h2>
<div class="outline-text-2" id="text-3">
<p>
Postoje tri osnovna naÄina na koja moÅ¾ete uvesti novi tip u Haskell:
<code>data</code>, <code>newtype</code> i <code>type</code>.
</p>
</div>

<div id="outline-container-org44d61b8" class="outline-3">
<h3 id="org44d61b8"><span class="section-number-3">3.1</span> <code>data</code></h3>
<div class="outline-text-3" id="text-3-1">
<p>
Standardan naÄin za uvoÄenje novih tipova:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #3a81c3; font-weight: bold;">data</span> <span style="color: #ba2f59; font-weight: bold;">Person</span> <span style="color: #715ab1;">=</span>
  <span style="color: #ba2f59; font-weight: bold;">Person</span> <span style="color: #ba2f59; font-weight: bold;">String</span>
         <span style="color: #ba2f59; font-weight: bold;">String</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#955;&gt; Person "Pera" "Peric"</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Person "Pera" "Peric" :: Person</span>
</pre>
</div>

<p>
Obratite paÅ¾nju da <code>Person</code> levo od znaka jednakosti i <code>Person</code>
desno od znaka jednakosti nisu iste stvari. Ono sa leve strane unosi
novi pojam u jezik tipova dok ono sa desne strane unosi novi pojam u
jezik izraza. U primeru gore samo se sluÄajno isto zovu. Evo
primera:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #3a81c3; font-weight: bold;">data</span> <span style="color: #ba2f59; font-weight: bold;">Person1</span> <span style="color: #715ab1;">=</span>
  <span style="color: #ba2f59; font-weight: bold;">MkPerson</span> <span style="color: #ba2f59; font-weight: bold;">String</span>
           <span style="color: #ba2f59; font-weight: bold;">String</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#955;&gt; MkPerson "Pera" "Peric"</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">MkPerson "Pera" "Peric" :: Person1</span>
</pre>
</div>

<p>
<code>MkPerson</code> je u jeziku izraza, a <code>Person1</code> u jeziku tipova.
</p>

<p>
Ono sa leve strane jednakosti naziva se <i>type constructor</i> jer
konstruiÅ¡e tip u jeziku tipova, ono sa desne strane se naziva <i>data
constructor</i> jer konstruiÅ¡e vrednost tog tipa u jeziku izraza.
</p>

<p>
Pogledajmo sledeÄi primer:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #3a81c3; font-weight: bold;">data</span> <span style="color: #ba2f59; font-weight: bold;">Suit</span>
  <span style="color: #715ab1;">=</span> <span style="color: #ba2f59; font-weight: bold;">Club</span>
  <span style="color: #715ab1;">|</span> <span style="color: #ba2f59; font-weight: bold;">Diamond</span>
  <span style="color: #715ab1;">|</span> <span style="color: #ba2f59; font-weight: bold;">Heart</span>
  <span style="color: #715ab1;">|</span> <span style="color: #ba2f59; font-weight: bold;">Spade</span>

<span style="color: #3a81c3; font-weight: bold;">data</span> <span style="color: #ba2f59; font-weight: bold;">CardValue</span>
  <span style="color: #715ab1;">=</span> <span style="color: #ba2f59; font-weight: bold;">Two</span>
  <span style="color: #715ab1;">|</span> <span style="color: #ba2f59; font-weight: bold;">Three</span>
  <span style="color: #715ab1;">|</span> <span style="color: #ba2f59; font-weight: bold;">Four</span>
  <span style="color: #715ab1;">|</span> <span style="color: #ba2f59; font-weight: bold;">Five</span>
  <span style="color: #715ab1;">|</span> <span style="color: #ba2f59; font-weight: bold;">Six</span>
  <span style="color: #715ab1;">|</span> <span style="color: #ba2f59; font-weight: bold;">Seven</span>
  <span style="color: #715ab1;">|</span> <span style="color: #ba2f59; font-weight: bold;">Eight</span>
  <span style="color: #715ab1;">|</span> <span style="color: #ba2f59; font-weight: bold;">Nine</span>
  <span style="color: #715ab1;">|</span> <span style="color: #ba2f59; font-weight: bold;">Ten</span>
  <span style="color: #715ab1;">|</span> <span style="color: #ba2f59; font-weight: bold;">Jack</span>
  <span style="color: #715ab1;">|</span> <span style="color: #ba2f59; font-weight: bold;">Queen</span>
  <span style="color: #715ab1;">|</span> <span style="color: #ba2f59; font-weight: bold;">King</span>
  <span style="color: #715ab1;">|</span> <span style="color: #ba2f59; font-weight: bold;">Ace</span>

<span style="color: #3a81c3; font-weight: bold;">data</span> <span style="color: #ba2f59; font-weight: bold;">Card</span> <span style="color: #715ab1;">=</span> <span style="color: #ba2f59; font-weight: bold;">Card</span>
  { value <span style="color: #715ab1;">::</span> <span style="color: #ba2f59; font-weight: bold;">CardValue</span>
  , suit  <span style="color: #715ab1;">::</span> <span style="color: #ba2f59; font-weight: bold;">Suit</span>
  }
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#955;&gt; Card Ace Club</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Card Ace Club :: Card</span>
</pre>
</div>

<p>
Tipovi kao Å¡to su <code>CardValue</code> i <code>Suit</code> gde specificiramo oblik
svakog elementa zovu se <a href="https://wiki.haskell.org/Algebraic_data_type">algebartski tipovi</a>. Algebarski tipovi se
tako zovu jer se definiÅ¡u koriÅ¡Äenjem "algebarskih" operacija
("algebra" ovde praktiÄno znaÄi operaciju sabiranja &#x2014; izbora <code>A |
   B</code> i mnoÅ¾enja &#x2014; kombinacije <code>A B</code>). Npr. naÅ¡ prvi tip <code>Person</code> je
kombinacija dva <code>String</code>-a, <code>Suit</code> je izbor jedne od boja na
kartama.
</p>

<p>
Tipovi mogu biti i parametrizovani:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #3a81c3; font-weight: bold;">data</span> <span style="color: #ba2f59; font-weight: bold;">XList</span> a
  <span style="color: #715ab1;">=</span> <span style="color: #ba2f59; font-weight: bold;">Cons</span> a
         (<span style="color: #ba2f59; font-weight: bold;">XList</span> a)
  <span style="color: #715ab1;">|</span> <span style="color: #ba2f59; font-weight: bold;">Empty</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#955;&gt; (Cons 1 (Cons 2 Empty))</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">(Cons 1 (Cons 2 Empty)) :: Num a =&gt; XList a</span>
</pre>
</div>
</div>

<div id="outline-container-orgfceef80" class="outline-4">
<h4 id="orgfceef80"><span class="section-number-4">3.1.1</span> Records sintaksa</h4>
<div class="outline-text-4" id="text-3-1-1">
<p>
Postoji i alternativni naÄin za uvoÄenje novih tipova kada se
koristi <code>data</code> &#x2014; <i>records syntax</i>:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #3a81c3; font-weight: bold;">data</span> <span style="color: #ba2f59; font-weight: bold;">PersonRec</span> <span style="color: #715ab1;">=</span> <span style="color: #ba2f59; font-weight: bold;">PersonRec</span>
  { name    <span style="color: #715ab1;">::</span> <span style="color: #ba2f59; font-weight: bold;">String</span>
  , surname <span style="color: #715ab1;">::</span> <span style="color: #ba2f59; font-weight: bold;">String</span>
  , age     <span style="color: #715ab1;">::</span> <span style="color: #ba2f59; font-weight: bold;">Int</span>
  }
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#955;&gt; PersonRec "Mile" "Milic"</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">PersonRec "Mile" "Milic" :: Int -&gt; PersonRec</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#955;&gt; name</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">name :: PersonRec -&gt; String</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#955;&gt; PersonRec "Mile" "Milic" 25</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">PersonRec "Mile" "Milic" 25 :: PersonRec</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#955;&gt; name (PersonRec "Mile" "Milic" 25)</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">"Mile"</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#955;&gt; name $ PersonRec "Mile" "Milic" 25</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">"Mile"</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#955;&gt; PersonRec {name = "Mile", surname = "Milic", age = 25}</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">PersonRec {name = "Mile", surname = "Milic", age = 25} :: PersonRec</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#955;&gt; surname $ PersonRec {name = "Mile", surname = "Milic", age = 25}</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">"Milic"</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org6555a33" class="outline-3">
<h3 id="org6555a33"><span class="section-number-3">3.2</span> <code>newtype</code></h3>
<div class="outline-text-3" id="text-3-2">
<p>
<code>newtype</code> dekleracija uvodi novi tip na isti naÄin kao Å¡to to radi
<code>data</code>. Ako u vaÅ¡em programu sve pojave <code>newtype</code> zamenite sa
<code>data</code> velike su Å¡anse da Äe se kompajlirati(dakle raditi). Ali
konverzija u suprotnom smeru stoji samo pod jednim uslovom &#x2014; ako
<code>data</code> dekleracije imaju samo jedan <i>value</i> konstruktor sa samo
jednim parametrom:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #3a81c3; font-weight: bold;">newtype</span> <span style="color: #ba2f59; font-weight: bold;">HTML</span> <span style="color: #715ab1;">=</span>
  <span style="color: #ba2f59; font-weight: bold;">HTLM</span> <span style="color: #ba2f59; font-weight: bold;">String</span>
</pre>
</div>

<p>
Vrednost <code>newtype</code> dekleracije je u tome Å¡to uvodi tipove koji
<span class="underline">nemaju nikakvu cenu</span> u <i>run time</i>-u &#x2014; u <i>run time</i>-u se mogu
predstaviti "bit za bit" isto kao i tipovi koje obavijaju. U
sluÄaju iznad kompajler Äe znati da su tipovi <code>HTML</code> i <code>String</code>
potpuno razliÄiti, ni jedna funkcija koja prima/vraÄa <code>HTML</code> <span class="underline">ne
moÅ¾e</span> umesto njega da koristi <code>String</code>. Tako dobijamo sve benefite
komplajlera jer on razlikuje tipove bez obzira Å¡to se ti tipovi u
<i>run time</i>-u reprezentuju na "bit za bit" isti naÄin.
</p>
</div>
</div>

<div id="outline-container-org6b2ae4e" class="outline-3">
<h3 id="org6b2ae4e"><span class="section-number-3">3.3</span> <code>type</code></h3>
<div class="outline-text-3" id="text-3-3">
<p>
Type dekleracija uvodi sinonime za tipove &#x2014; <i>type synonyms</i>. U
<i>C</i>-u se to na primer radi sa <code>typedef</code>. Tipovi uvedeni sa <code>type</code>
imaju iste <i>value</i> konstruktore kao i osnovni tip i u svim izrazima
gde se pojavljuje osnovni tip mogu stajati umesto njega.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #3a81c3; font-weight: bold;">newtype</span> <span style="color: #ba2f59; font-weight: bold;">State</span> s a <span style="color: #715ab1;">=</span> <span style="color: #ba2f59; font-weight: bold;">State</span>
  { runState <span style="color: #715ab1;">::</span> s <span style="color: #715ab1;">-&gt;</span> (s, a)
  }

<span style="color: #3a81c3; font-weight: bold;">type</span> <span style="color: #ba2f59; font-weight: bold;">Name</span> <span style="color: #715ab1;">=</span> <span style="color: #ba2f59; font-weight: bold;">String</span>

<span style="color: #6c3163; font-weight: bold;">uppercase</span> <span style="color: #715ab1;">::</span> <span style="color: #ba2f59; font-weight: bold;">String</span> <span style="color: #715ab1;">-&gt;</span> <span style="color: #ba2f59; font-weight: bold;">String</span>
<span style="color: #6c3163; font-weight: bold;">uppercase</span> x <span style="color: #715ab1;">=</span> map toUpper x

<span style="color: #6c3163; font-weight: bold;">uppercaseName</span> <span style="color: #715ab1;">::</span> <span style="color: #ba2f59; font-weight: bold;">Name</span> <span style="color: #715ab1;">-&gt;</span> <span style="color: #ba2f59; font-weight: bold;">Name</span>
<span style="color: #6c3163; font-weight: bold;">uppercaseName</span> x <span style="color: #715ab1;">=</span> map toUpper x
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#955;&gt; uppercase "Mile"</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">"MILE"</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#955;&gt; uppercaseName "Mile"</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">"MILE"</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org9196c97" class="outline-2">
<h2 id="org9196c97"><span class="section-number-2">4</span> Kinds</h2>
<div class="outline-text-2" id="text-4">
<p>
Tipovi u svojoj osnovi predstavljaju skupove vrednosti. Tako je
<code>Integer</code> skup svih celih brojeva, <code>[Bool]</code> skup svih lista
istinitosnih vrednosti.
</p>

<p>
Haskell koristi joÅ¡ opÅ¡irniju definiciju tipa koja obuhvata i
funkcije nad tipovima. Pa se tako neprimenjen konstruktor list tipa
<code>[]</code> takoÄe smatra tipom. Parcijalno primenjen konstruktor tipa
funkcije <code>(-&gt;) Integer</code> takoÄe. Ovi tipovi svakako ne sadrÅ¾e
vrednosti.
</p>

<p>
Kako bi razlikovao obiÄne tipove od funkcija nad tipovima Haskell
koristi <i>system of kinds</i> (sistem rodova - u slobodnom
prevodu). <i>Kinds</i> se mogu zamisliti kao "tipovi tipova". Svaki
<i>kind</i> je ili <code>*</code> ili <code>kind1 -&gt; kind2</code> gde su <code>kind1</code> i <code>kind2</code>
takoÄe <i>kinds</i>. <code>*</code> je <i>kind</i> svih obiÄnih tipova (onih koji sadrÅ¾e
vrednosti) a <code>kind1 -&gt; kind2</code> je <i>kind</i> svih funkcija na nivou tipa
koje preslikavaju <code>kind1</code> u <code>kind2</code>. Evo nekih primera tipova i
njihovih <i>kind</i>-a:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #ba2f59; font-weight: bold;">Integer</span>, <span style="color: #ba2f59; font-weight: bold;">Char</span>, [<span style="color: #ba2f59; font-weight: bold;">Bool</span>], [[<span style="color: #ba2f59; font-weight: bold;">Bool</span>]], [val] <span style="color: #715ab1;">::</span> <span style="color: #715ab1;">*</span>
<span style="color: #ba2f59; font-weight: bold;">[]</span>, <span style="color: #ba2f59; font-weight: bold;">Maybe</span> <span style="color: #715ab1;">::</span> <span style="color: #715ab1;">*</span> <span style="color: #715ab1;">-&gt;</span> <span style="color: #715ab1;">*</span>
<span style="color: #ba2f59; font-weight: bold;">(,)</span>, <span style="color: #ba2f59; font-weight: bold;">(-&gt;)</span> <span style="color: #715ab1;">::</span> <span style="color: #715ab1;">*</span> <span style="color: #715ab1;">-&gt;</span> <span style="color: #715ab1;">*</span> <span style="color: #715ab1;">-&gt;</span> <span style="color: #715ab1;">*</span>
</pre>
</div>

<p>
Funkcije na nivou tipova koje primaju viÅ¡e parametara mogu biti
izraÅ¾ene kroz <i>Currying</i>:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #ba2f59; font-weight: bold;">(,)</span>, <span style="color: #ba2f59; font-weight: bold;">(-&gt;)</span> <span style="color: #715ab1;">::</span> <span style="color: #715ab1;">*</span> <span style="color: #715ab1;">-&gt;</span> <span style="color: #715ab1;">*</span> <span style="color: #715ab1;">-&gt;</span> <span style="color: #715ab1;">*</span>
</pre>
</div>

<p>
Dobar blog na ovu temu nalazi se <a href="https://jeltsch.wordpress.com/2013/02/09/some-interesting-features-of-haskells-type-system/">ovde</a>.
</p>
</div>
</div>

<div id="outline-container-org3eca72b" class="outline-2">
<h2 id="org3eca72b"><span class="section-number-2">5</span> Haskell &#x2014; lazy by default</h2>
<div class="outline-text-2" id="text-5">
</div>
<div id="outline-container-org6918a97" class="outline-3">
<h3 id="org6918a97"><span class="section-number-3">5.1</span> <i>Strict evaluation vs. lazy evaluation</i></h3>
<div class="outline-text-3" id="text-5-1">
</div>
<div id="outline-container-orgd00f77c" class="outline-4">
<h4 id="orgd00f77c"><span class="section-number-4">5.1.1</span> Cena <i>strict</i> izraÄunavanja</h4>
</div>

<div id="outline-container-orgfaf0e57" class="outline-4">
<h4 id="orgfaf0e57"><span class="section-number-4">5.1.2</span> Cena <i>lazy</i> izraÄunavanja</h4>
</div>
</div>

<div id="outline-container-orga546fa6" class="outline-3">
<h3 id="orga546fa6"><span class="section-number-3">5.2</span> Haskell <i>laziness look and feel</i> vs. Java <i>Supliers</i> ("<i>type level laziness</i>")</h3>
<div class="outline-text-3" id="text-5-2">
<p>
Java je na <a href="https://www.sitepoint.com/java-in-praise-of-laziness/">SitePoint-u</a>. Haskell je na <a href="http://www.seas.upenn.edu/~cis194/spring13/lectures/06-laziness.html">CIS-u</a>.
</p>
</div>
</div>
</div>

<div id="outline-container-org397c645" class="outline-2">
<h2 id="org397c645"><span class="section-number-2">6</span> Polimorfizam</h2>
<div class="outline-text-2" id="text-6">
<p>
Vrsta polimorfizma koju haskell koristi je <a href="https://en.wikipedia.org/wiki/Parametric_polymorphism">parametarski
polimorfizam</a>.
</p>
</div>
</div>
<div id="outline-container-orgaa81928" class="outline-2">
<h2 id="orgaa81928"><span class="section-number-2">7</span> GADTs</h2>
</div>
<div id="outline-container-orgecc57a1" class="outline-2">
<h2 id="orgecc57a1"><span class="section-number-2">8</span> Type Classes</h2>
<div class="outline-text-2" id="text-8">
<p>
<i>Type class</i>-e predstavljaju skupove tipova koji ispoljavaju neke
iste osobine. Te iste osobine oslikane su funkcijama koje obuhvata
klasa.
</p>

<p>
<code>Eq</code> je klasa koja predstavlja skup tipova koji mogu da se porede:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #3a81c3; font-weight: bold;">class</span> <span style="color: #ba2f59; font-weight: bold;">Eq</span> a <span style="color: #3a81c3; font-weight: bold;">where</span>
  (<span style="color: #715ab1;">==</span>) <span style="color: #715ab1;">::</span> a <span style="color: #715ab1;">-&gt;</span> a <span style="color: #715ab1;">-&gt;</span> <span style="color: #ba2f59; font-weight: bold;">Bool</span>
  (<span style="color: #715ab1;">/=</span>) <span style="color: #715ab1;">::</span> a <span style="color: #715ab1;">-&gt;</span> a <span style="color: #715ab1;">-&gt;</span> <span style="color: #ba2f59; font-weight: bold;">Bool</span>
</pre>
</div>

<p>
Ako Å¾elimo da naÅ¡ tip moÅ¾e da se poredi treba da napravimo instancu
naÅ¡eg tipa u <code>Eq</code> klasi.
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #3a81c3; font-weight: bold;">data</span> <span style="color: #ba2f59; font-weight: bold;">Foo</span>
  <span style="color: #715ab1;">=</span> <span style="color: #ba2f59; font-weight: bold;">I</span> <span style="color: #ba2f59; font-weight: bold;">Int</span>
  <span style="color: #715ab1;">|</span> <span style="color: #ba2f59; font-weight: bold;">C</span> <span style="color: #ba2f59; font-weight: bold;">Char</span>

<span style="color: #3a81c3; font-weight: bold;">instance</span> <span style="color: #ba2f59; font-weight: bold;">Eq</span> <span style="color: #ba2f59; font-weight: bold;">Foo</span> <span style="color: #3a81c3; font-weight: bold;">where</span>
  (<span style="color: #ba2f59; font-weight: bold;">I</span> x) <span style="color: #715ab1;">==</span> (<span style="color: #ba2f59; font-weight: bold;">I</span> y) <span style="color: #715ab1;">=</span> x <span style="color: #715ab1;">==</span> y
  (<span style="color: #ba2f59; font-weight: bold;">C</span> x) <span style="color: #715ab1;">==</span> (<span style="color: #ba2f59; font-weight: bold;">C</span> y) <span style="color: #715ab1;">=</span> x <span style="color: #715ab1;">==</span> y
  (<span style="color: #ba2f59; font-weight: bold;">C</span> x) <span style="color: #715ab1;">==</span> (<span style="color: #ba2f59; font-weight: bold;">I</span> y) <span style="color: #715ab1;">=</span> ord x <span style="color: #715ab1;">==</span> y
  (<span style="color: #ba2f59; font-weight: bold;">I</span> x) <span style="color: #715ab1;">==</span> (<span style="color: #ba2f59; font-weight: bold;">C</span> y) <span style="color: #715ab1;">=</span> x <span style="color: #715ab1;">==</span> ord y
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#955;&gt; C 'a' == I 97</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">True</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#955;&gt; C 'a' == I 99</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">False</span>
</pre>
</div>
</div>

<div id="outline-container-org2084e12" class="outline-3">
<h3 id="org2084e12"><span class="section-number-3">8.1</span> Automatsko instanciranje sa <code>deriving</code></h3>
<div class="outline-text-3" id="text-8-1">
<p>
Kada je situacija dovoljno prosta, kompajler moÅ¾e samostalno da
uradi proÅ¡irenje <i>type class</i>-e. Da bismo naznaÄili da to Å¾elimo
treba da koristimo <code>deriving</code>:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #3a81c3; font-weight: bold;">data</span> <span style="color: #ba2f59; font-weight: bold;">Bar</span> a <span style="color: #715ab1;">=</span>
  <span style="color: #ba2f59; font-weight: bold;">B</span> [a]
  <span style="color: #3a81c3; font-weight: bold;">deriving</span> (<span style="color: #ba2f59; font-weight: bold;">Eq</span>, <span style="color: #ba2f59; font-weight: bold;">Show</span>)
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#955;&gt; B [1, 2, 3] == B [1, 2, 3]</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">True</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#955;&gt; B [1, 2, 3] == B [1, 2, 3, 3]</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">False</span>
</pre>
</div>

<p>
U primeru sa <code>Foo</code> smo takoÄe mogli samo da iskoristimo <code>deriving</code>.
</p>
</div>
</div>

<div id="outline-container-orge5cc757" class="outline-3">
<h3 id="orge5cc757"><span class="section-number-3">8.2</span> <code>class</code> NIJE <code>class</code> iz Pythona i Jave</h3>
<div class="outline-text-3" id="text-8-2">
<p>
Ono Å¡to je <code>type class</code> u Haskell-u to je sliÄnije abstraktnim
klasama u Javi i Pythonu.
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 1: </span>haskellNTP/showcase/src/Hierarchies.hs</label><pre class="src src-haskell"><span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Novi tipovi</span>
<span style="color: #3a81c3; font-weight: bold;">data</span> <span style="color: #ba2f59; font-weight: bold;">UnderGStudent</span> <span style="color: #715ab1;">=</span> <span style="color: #ba2f59; font-weight: bold;">UnderGStudent</span>
  { uGHunamInfo   <span style="color: #715ab1;">::</span> <span style="color: #ba2f59; font-weight: bold;">HumanInfo</span>
  , uGStudentInfo <span style="color: #715ab1;">::</span> <span style="color: #ba2f59; font-weight: bold;">StudentInfo</span>
  } <span style="color: #3a81c3; font-weight: bold;">deriving</span> (<span style="color: #ba2f59; font-weight: bold;">Show</span>)

<span style="color: #3a81c3; font-weight: bold;">data</span> <span style="color: #ba2f59; font-weight: bold;">PhDStudent</span> <span style="color: #715ab1;">=</span> <span style="color: #ba2f59; font-weight: bold;">PhDStudent</span>
  { phDHumanInfo   <span style="color: #715ab1;">::</span> <span style="color: #ba2f59; font-weight: bold;">HumanInfo</span>
  , phDStudentInfo <span style="color: #715ab1;">::</span> <span style="color: #ba2f59; font-weight: bold;">StudentInfo</span>
  , thesis         <span style="color: #715ab1;">::</span> <span style="color: #ba2f59; font-weight: bold;">String</span>
  } <span style="color: #3a81c3; font-weight: bold;">deriving</span> (<span style="color: #ba2f59; font-weight: bold;">Show</span>)

<span style="color: #3a81c3; font-weight: bold;">data</span> <span style="color: #ba2f59; font-weight: bold;">StudentInfo</span> <span style="color: #715ab1;">=</span> <span style="color: #ba2f59; font-weight: bold;">StudentInfo</span>
  { index <span style="color: #715ab1;">::</span> <span style="color: #ba2f59; font-weight: bold;">Int</span>
  } <span style="color: #3a81c3; font-weight: bold;">deriving</span> (<span style="color: #ba2f59; font-weight: bold;">Show</span>)

<span style="color: #3a81c3; font-weight: bold;">data</span> <span style="color: #ba2f59; font-weight: bold;">HumanInfo</span> <span style="color: #715ab1;">=</span> <span style="color: #ba2f59; font-weight: bold;">HumanInfo</span>
  { name      <span style="color: #715ab1;">::</span> <span style="color: #ba2f59; font-weight: bold;">String</span>
  , surname   <span style="color: #715ab1;">::</span> <span style="color: #ba2f59; font-weight: bold;">String</span>
  , birthYear <span style="color: #715ab1;">::</span> <span style="color: #ba2f59; font-weight: bold;">Int</span>
  } <span style="color: #3a81c3; font-weight: bold;">deriving</span> (<span style="color: #ba2f59; font-weight: bold;">Show</span>)

<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Ljudi su ljudi jer se mu&#269;e, to ih &#269;ini ljudima</span>
<span style="color: #3a81c3; font-weight: bold;">class</span> <span style="color: #ba2f59; font-weight: bold;">Human</span> a <span style="color: #3a81c3; font-weight: bold;">where</span>
  struggle <span style="color: #715ab1;">::</span> a <span style="color: #715ab1;">-&gt;</span> <span style="color: #ba2f59; font-weight: bold;">String</span>
  <span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Podrazumevana implementacija</span>
  struggle <span style="color: #715ab1;">=</span> const <span style="color: #2d9574;">"A poor man is struggling."</span>

<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Predava&#269;i su pre svega ljudi, a potom moraju znati i da se</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">predstave</span>
<span style="color: #3a81c3; font-weight: bold;">class</span> <span style="color: #ba2f59; font-weight: bold;">Human</span> a <span style="color: #715ab1;">=&gt;</span> <span style="color: #ba2f59; font-weight: bold;">Lecturer</span> a <span style="color: #3a81c3; font-weight: bold;">where</span>
  introduce <span style="color: #715ab1;">::</span> a <span style="color: #715ab1;">-&gt;</span> <span style="color: #ba2f59; font-weight: bold;">String</span>

<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">UnderGStudent instanca &#269;oveka, UnderGStudent je &#269;ovek</span>
<span style="color: #3a81c3; font-weight: bold;">instance</span> <span style="color: #ba2f59; font-weight: bold;">Human</span> <span style="color: #ba2f59; font-weight: bold;">UnderGStudent</span> <span style="color: #3a81c3; font-weight: bold;">where</span>
  struggle (<span style="color: #ba2f59; font-weight: bold;">UnderGStudent</span> (<span style="color: #ba2f59; font-weight: bold;">HumanInfo</span> n <span style="color: #3a81c3; font-weight: bold;">_</span> <span style="color: #3a81c3; font-weight: bold;">_</span>) <span style="color: #3a81c3; font-weight: bold;">_</span>) <span style="color: #715ab1;">=</span> n <span style="color: #715ab1;">++</span> <span style="color: #2d9574;">" is gravely struggling."</span>

<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">PhDStudent instanca &#269;oveka, PhDStudent je &#269;ovek</span>
<span style="color: #3a81c3; font-weight: bold;">instance</span> <span style="color: #ba2f59; font-weight: bold;">Human</span> <span style="color: #ba2f59; font-weight: bold;">PhDStudent</span>

<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">PhdStudent instanca predava&#269;a</span>
<span style="color: #3a81c3; font-weight: bold;">instance</span> <span style="color: #ba2f59; font-weight: bold;">Lecturer</span> <span style="color: #ba2f59; font-weight: bold;">PhDStudent</span> <span style="color: #3a81c3; font-weight: bold;">where</span>
  introduce (<span style="color: #ba2f59; font-weight: bold;">PhDStudent</span> (<span style="color: #ba2f59; font-weight: bold;">HumanInfo</span> n <span style="color: #3a81c3; font-weight: bold;">_</span> <span style="color: #3a81c3; font-weight: bold;">_</span>) <span style="color: #3a81c3; font-weight: bold;">_</span> t) <span style="color: #715ab1;">=</span>
    <span style="color: #2d9574;">"I am "</span> <span style="color: #715ab1;">++</span> n <span style="color: #715ab1;">++</span> <span style="color: #2d9574;">" and my research is directed towards "</span> <span style="color: #715ab1;">++</span> t <span style="color: #715ab1;">++</span> <span style="color: #2d9574;">"."</span>

<span style="color: #2aa1ae; background-color: #ecf3ec;">--</span><span style="color: #2aa1ae; background-color: #ecf3ec;">------------------------------------------------------------------------------</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Primeri:</span>

<span style="color: #6c3163; font-weight: bold;">pera</span> <span style="color: #715ab1;">=</span> <span style="color: #ba2f59; font-weight: bold;">UnderGStudent</span> (<span style="color: #ba2f59; font-weight: bold;">HumanInfo</span> <span style="color: #2d9574;">"Petar"</span> <span style="color: #2d9574;">"Petrovic"</span> 1987) (<span style="color: #ba2f59; font-weight: bold;">StudentInfo</span> 8791)
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#955;&gt; name . uGHunamInfo $ pera</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">"Petar"</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">--</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#955;&gt; struggle pera</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">"Petar is gravely struggling."</span>

<span style="color: #6c3163; font-weight: bold;">zika</span> <span style="color: #715ab1;">=</span>
  <span style="color: #ba2f59; font-weight: bold;">PhDStudent</span>
    (<span style="color: #ba2f59; font-weight: bold;">HumanInfo</span> <span style="color: #2d9574;">"Zika"</span> <span style="color: #2d9574;">"Zikic"</span> 1983)
    (<span style="color: #ba2f59; font-weight: bold;">StudentInfo</span> 123)
    <span style="color: #2d9574;">"functional programming"</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#955;&gt; name . phDHumanInfo $ zika</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">"Zika"</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">--</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#955;&gt; thesis zika</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">"functional programming"</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">--</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">PhDStudent koristi default-nu implementaciju struggle funkcije</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#955;&gt; struggle zika</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">"A poor man is struggling."</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">--</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#955;&gt; introduce zika</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">"I am Zika and my research is directed towards functional programming."</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org3da4c67" class="outline-3">
<h3 id="org3da4c67"><span class="section-number-3">8.3</span> <i>fundeps</i> (Functional Dependencies)</h3>
<div class="outline-text-3" id="text-8-3">
<p>
<a href="https://wiki.haskell.org/Functional_dependencies"><i>Fundeps</i></a> se koriste da daju dodatna meÄusobna ograniÄenja
parametara klasa. U klasama sa viÅ¡e parametara daju moguÄnost da se
tipovi parametara zakljuÄuju na osnovu tipova drugih parametara.
</p>

<p>
Jedan naivan prikaz problema kog reÅ¡avaju <i>fundeps</i>:
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 2: </span>haskellNTP/showcase/src/FunDeps.hs</label><pre class="src src-haskell"><span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Abstrakcija raspakivanja</span>
<span style="color: #3a81c3; font-weight: bold;">class</span> <span style="color: #ba2f59; font-weight: bold;">Unpack</span> packaging content  <span style="color: #3a81c3; font-weight: bold;">where</span>
  unpack <span style="color: #715ab1;">::</span> packaging <span style="color: #715ab1;">-&gt;</span> content

<span style="color: #3a81c3; font-weight: bold;">data</span> <span style="color: #ba2f59; font-weight: bold;">Carton</span> <span style="color: #715ab1;">=</span> <span style="color: #ba2f59; font-weight: bold;">Carton</span>
  { volume <span style="color: #715ab1;">::</span> <span style="color: #ba2f59; font-weight: bold;">Double</span>
  } <span style="color: #3a81c3; font-weight: bold;">deriving</span> (<span style="color: #ba2f59; font-weight: bold;">Eq</span>, <span style="color: #ba2f59; font-weight: bold;">Show</span>)

<span style="color: #3a81c3; font-weight: bold;">data</span> <span style="color: #ba2f59; font-weight: bold;">Milk</span> <span style="color: #715ab1;">=</span> <span style="color: #ba2f59; font-weight: bold;">Milk</span>
  { kind <span style="color: #715ab1;">::</span> <span style="color: #ba2f59; font-weight: bold;">String</span>
  , desc <span style="color: #715ab1;">::</span> <span style="color: #ba2f59; font-weight: bold;">String</span>
  } <span style="color: #3a81c3; font-weight: bold;">deriving</span> (<span style="color: #ba2f59; font-weight: bold;">Show</span>)

<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Carton i Milk instanca raspakivanja, kada se raspakuje mleko iz</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">kartona</span>
<span style="color: #3a81c3; font-weight: bold;">instance</span> <span style="color: #ba2f59; font-weight: bold;">Unpack</span> <span style="color: #ba2f59; font-weight: bold;">Carton</span> <span style="color: #ba2f59; font-weight: bold;">Milk</span> <span style="color: #3a81c3; font-weight: bold;">where</span>
  unpack p <span style="color: #715ab1;">=</span> <span style="color: #ba2f59; font-weight: bold;">Milk</span> <span style="color: #2d9574;">"cow milk"</span> <span style="color: #715ab1;">$</span> <span style="color: #2d9574;">"carton of "</span> <span style="color: #715ab1;">++</span> (show <span style="color: #715ab1;">.</span> volume <span style="color: #715ab1;">$</span> p) <span style="color: #715ab1;">++</span> <span style="color: #2d9574;">" volume."</span>

<span style="color: #6c3163; font-weight: bold;">c</span> <span style="color: #715ab1;">::</span> <span style="color: #ba2f59; font-weight: bold;">Carton</span>
<span style="color: #6c3163; font-weight: bold;">c</span> <span style="color: #715ab1;">=</span> <span style="color: #ba2f59; font-weight: bold;">Carton</span> 500

<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">try = unpack c</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">src/FunDeps.hs:25:7-14: error: &#8230;</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">--     </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#8226; Ambiguous type variable &#8216;content0&#8217; arising from a use of &#8216;unpack&#8217;</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">--       </span><span style="color: #2aa1ae; background-color: #ecf3ec;">prevents the constraint &#8216;(Unpack</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">--                                   </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Carton content0)&#8217; from being solved.</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">--       </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Relevant bindings include</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">--         </span><span style="color: #2aa1ae; background-color: #ecf3ec;">try :: content0</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">--           </span><span style="color: #2aa1ae; background-color: #ecf3ec;">(bound at haskellNTP/showcase/src/FunDeps.hs:25:1)</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">--       </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Probable fix: use a type annotation to specify what &#8216;content0&#8217; should b</span><span style="color: #6c4173; background-color: #ecf3ec;">e.</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">--       </span><span style="color: #2aa1ae; background-color: #ecf3ec;">These potential instance exist:</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">--         </span><span style="color: #2aa1ae; background-color: #ecf3ec;">instance Unpack Carton Milk</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">--           </span><span style="color: #2aa1ae; background-color: #ecf3ec;">-- Defined at haskellNTP/showcase/src/FunDeps.hs:19:10</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">--     </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#8226; In the expression: unpack c</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">--       </span><span style="color: #2aa1ae; background-color: #ecf3ec;">In an equation for &#8216;try&#8217;: try = unpack c</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Compilation failed.</span>
</pre>
</div>

<p>
Kompajler prosto ne moÅ¾e da zna kog je tipa izraz <code>unpack c</code>.
</p>

<p>
<b>ZaÅ¡to?</b>
</p>

<p>
PokuÅ¡ajmo da reprodukujemo kako kompajler "razmiÅ¡lja" na osnovu
greÅ¡ke koju nam je dao.
</p>

<p>
Prvo nam kaÅ¾e da smo bili dvosmisleni pri koriÅ¡Äenju <code>unpack</code>
funkcije jer on ne moÅ¾e da repreodukuje kako <b>taÄno</b> izgleda klasa
te funkcije. Jasno mu je da je ta klasa neÅ¡to nalik <code>(Unpack Carton
   content0)</code> ali ga muÄi taj <code>content0</code> jer za njega ne ume da kaÅ¾e
kog je tipa:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">src/FunDeps.hs:25:7-14: error: &#8230;</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">--     </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#8226; Ambiguous type variable &#8216;content0&#8217; arising from a use of &#8216;unpack&#8217;</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">--       </span><span style="color: #2aa1ae; background-color: #ecf3ec;">prevents the constraint &#8216;(Unpack</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">--                                   </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Carton content0)&#8217; from being solved.</span>
</pre>
</div>

<p>
I onda traÅ¾i od nas da mu pomognemo. KaÅ¾e da bismo mi moÅ¾da mogli
da mu pomognemo tako Å¡to Äemo reÄi kog je tipa izraz <code>unpack c</code> pa
Äe on onda umeti da shvati kako taÄno izgleda klasa iz koje je ta
funkcija:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #2aa1ae; background-color: #ecf3ec;">--       </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Probable fix: use a type annotation to specify what &#8216;content0&#8217; should b</span><span style="color: #6c4173; background-color: #ecf3ec;">e.</span>
</pre>
</div>

<p>
I na kraju nam joÅ¡ pokazuje kako razmiÅ¡lja tako Å¡to nam kaÅ¾e da je
traÅ¾io <b>sve moguÄe instance</b> te sumnjive klase <code>Unpack</code> (i naÅ¡ao je
jednu).
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #2aa1ae; background-color: #ecf3ec;">--       </span><span style="color: #2aa1ae; background-color: #ecf3ec;">These potential instance exist:</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">--         </span><span style="color: #2aa1ae; background-color: #ecf3ec;">instance Unpack Carton Milk</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">--           </span><span style="color: #2aa1ae; background-color: #ecf3ec;">-- Defined at haskellNTP/showcase/src/FunDeps.hs:19:10</span>
</pre>
</div>

<p>
MoÅ¾da bismo se mogli <span class="underline">izleteti</span> i uzviknuti:
</p>

<p>
<b>Pa eto mu odgovora. PiÅ¡e u toj instanci kog je tipa <code>unpack c</code>
(naravno da je <code>Milk</code>)!</b>
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #3a81c3; font-weight: bold;">instance</span> <span style="color: #ba2f59; font-weight: bold;">Unpack</span> <span style="color: #ba2f59; font-weight: bold;">Carton</span> <span style="color: #ba2f59; font-weight: bold;">Milk</span> <span style="color: #3a81c3; font-weight: bold;">where</span>
  unpack p <span style="color: #715ab1;">=</span> <span style="color: #ba2f59; font-weight: bold;">Milk</span> <span style="color: #2d9574;">"cow milk"</span> <span style="color: #715ab1;">$</span> <span style="color: #2d9574;">"carton of "</span> <span style="color: #715ab1;">++</span> (show <span style="color: #715ab1;">.</span> volume <span style="color: #715ab1;">$</span> p) <span style="color: #715ab1;">++</span> <span style="color: #2d9574;">" volume."</span>
</pre>
</div>

<p>
MeÄutim pogreÅ¡ili bismo ( <span class="underline">naravno</span> ).
</p>

<p>
<b>ZaÅ¡to?</b>
</p>

<p>
Zato Å¡to se naknadno moÅ¾e dodati nova instanca <code>Unpack</code> klase. â¦
</p>

<p>
Na primer:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #3a81c3; font-weight: bold;">data</span> <span style="color: #ba2f59; font-weight: bold;">Yogurt</span> <span style="color: #715ab1;">=</span> <span style="color: #ba2f59; font-weight: bold;">Yogurt</span>
  { density <span style="color: #715ab1;">::</span> <span style="color: #ba2f59; font-weight: bold;">String</span>
  } <span style="color: #3a81c3; font-weight: bold;">deriving</span> (<span style="color: #ba2f59; font-weight: bold;">Show</span>)

<span style="color: #3a81c3; font-weight: bold;">instance</span> <span style="color: #ba2f59; font-weight: bold;">Unpack</span> <span style="color: #ba2f59; font-weight: bold;">Carton</span> <span style="color: #ba2f59; font-weight: bold;">Yogurt</span> <span style="color: #3a81c3; font-weight: bold;">where</span>
  unpack c <span style="color: #715ab1;">=</span> <span style="color: #ba2f59; font-weight: bold;">Yogurt</span> <span style="color: #715ab1;">$</span> <span style="color: #2d9574;">"rare yogurt in carton of "</span> <span style="color: #715ab1;">++</span> (show <span style="color: #715ab1;">.</span> volume <span style="color: #715ab1;">$</span> c) <span style="color: #715ab1;">++</span> <span style="color: #2d9574;">"."</span>
</pre>
</div>

<p>
<b>ReÅ¡enje:</b>
</p>

<p>
MoÅ¾emo posluÅ¡ati kompjler i eksplicitno dati tip izrazu:
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#955;&gt; unpack c :: Yogurt</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Yogurt {density = "rare yogurt in carton of 500.0."}</span>
</pre>
</div>

<p>
MoÅ¾emo iskoristiti <a href="https://prime.haskell.org/wiki/FlexibleInstances">FlexibleInstances</a> dodatak jeziku:
</p>
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#955;&gt; :set -XFlexibleContexts</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#955;&gt; unpack c</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">unpack c :: Unpack Carton content =&gt; content</span>
</pre>
</div>

<p>
I moÅ¾emo koristi <i>fundeps</i>:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #3a81c3; font-weight: bold;">class</span> <span style="color: #ba2f59; font-weight: bold;">Unpack'</span> packaging content  <span style="color: #715ab1;">|</span> packaging <span style="color: #715ab1;">-&gt;</span> content <span style="color: #3a81c3; font-weight: bold;">where</span>
  unpack' <span style="color: #715ab1;">::</span> packaging <span style="color: #715ab1;">-&gt;</span> content

<span style="color: #3a81c3; font-weight: bold;">instance</span> <span style="color: #ba2f59; font-weight: bold;">Unpack'</span> <span style="color: #ba2f59; font-weight: bold;">Carton</span> <span style="color: #ba2f59; font-weight: bold;">Milk</span> <span style="color: #3a81c3; font-weight: bold;">where</span>
  unpack' p <span style="color: #715ab1;">=</span>
    <span style="color: #ba2f59; font-weight: bold;">Milk</span> <span style="color: #2d9574;">"cow milk"</span> <span style="color: #715ab1;">$</span> <span style="color: #2d9574;">"carton of "</span> <span style="color: #715ab1;">++</span> (show <span style="color: #715ab1;">.</span> volume <span style="color: #715ab1;">$</span> p) <span style="color: #715ab1;">++</span> <span style="color: #2d9574;">" volume."</span>

<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#955;&gt; unpack' c</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Milk {kind = "cow milk", desc = "carton of 500.0 volume."}</span>
</pre>
</div>

<p>
Sada smo u zaglavlju klase <code>Unpack'</code> rekli da:
</p>

<p>
<b>Za jedan <code>packaging</code> tip moÅ¾e biti samo jedan <code>content</code> tip</b>.
</p>

<p>
I nema nikakve dileme kog je tipa <code>unpack' c</code> jer <b>ne moÅ¾e</b>
postojati joÅ¡ jedna instanca klase <code>Unpack'</code> koja bi pravila
problem:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #3a81c3; font-weight: bold;">data</span> <span style="color: #ba2f59; font-weight: bold;">EnergyDrink</span> <span style="color: #715ab1;">=</span> <span style="color: #ba2f59; font-weight: bold;">EnergyDrink</span>
  { caffeineRate <span style="color: #715ab1;">::</span> <span style="color: #ba2f59; font-weight: bold;">Int</span>
  } <span style="color: #3a81c3; font-weight: bold;">deriving</span> (<span style="color: #ba2f59; font-weight: bold;">Show</span>)

<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">instance Unpack' GlassBottle EnergyDrink where</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">--   </span><span style="color: #2aa1ae; background-color: #ecf3ec;">unpack' p = EnergyDrink 12</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">src/FunDeps.hs:78:10-33: error: &#8230;</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">--     </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Functional dependencies conflict between instance declarations:</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">--       </span><span style="color: #2aa1ae; background-color: #ecf3ec;">instance Unpack' GlassBottle Beer</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">--         </span><span style="color: #2aa1ae; background-color: #ecf3ec;">-- Defined at /home/novak/haskell/haskellNTP/showcase/src/FunDeps.hs:</span><span style="color: #6c4173; background-color: #ecf3ec;">78:10</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">--       </span><span style="color: #2aa1ae; background-color: #ecf3ec;">instance Unpack' GlassBottle EnergyDrink</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">--         </span><span style="color: #2aa1ae; background-color: #ecf3ec;">-- Defined at /home/novak/haskell/haskellNTP/showcase/src/FunDeps.hs:</span><span style="color: #6c4173; background-color: #ecf3ec;">90:10</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Compilation failed.</span>
</pre>
</div>

<p>
Naravno, u neku drugu ambalaÅ¾u se moÅ¾e bez problema pakovati neÅ¡to
drugo, to svakako neÄe praviti problem:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #3a81c3; font-weight: bold;">data</span> <span style="color: #ba2f59; font-weight: bold;">GlassBottle</span> <span style="color: #715ab1;">=</span> <span style="color: #ba2f59; font-weight: bold;">GlassBottle</span>
  { shape <span style="color: #715ab1;">::</span> <span style="color: #ba2f59; font-weight: bold;">String</span>
  } <span style="color: #3a81c3; font-weight: bold;">deriving</span> (<span style="color: #ba2f59; font-weight: bold;">Show</span>)

<span style="color: #3a81c3; font-weight: bold;">data</span> <span style="color: #ba2f59; font-weight: bold;">Beer</span> <span style="color: #715ab1;">=</span> <span style="color: #ba2f59; font-weight: bold;">Beer</span>
  { feel <span style="color: #715ab1;">::</span> <span style="color: #ba2f59; font-weight: bold;">String</span>
  } <span style="color: #3a81c3; font-weight: bold;">deriving</span> (<span style="color: #ba2f59; font-weight: bold;">Show</span>)

<span style="color: #3a81c3; font-weight: bold;">instance</span> <span style="color: #ba2f59; font-weight: bold;">Unpack'</span> <span style="color: #ba2f59; font-weight: bold;">GlassBottle</span> <span style="color: #ba2f59; font-weight: bold;">Beer</span> <span style="color: #3a81c3; font-weight: bold;">where</span>
  unpack' p <span style="color: #715ab1;">=</span> <span style="color: #ba2f59; font-weight: bold;">Beer</span> <span style="color: #715ab1;">$</span> <span style="color: #2d9574;">"Fresh bear from the "</span> <span style="color: #715ab1;">++</span> shape p <span style="color: #715ab1;">++</span> <span style="color: #2d9574;">"."</span>

<span style="color: #6c3163; font-weight: bold;">b</span> <span style="color: #715ab1;">=</span> <span style="color: #ba2f59; font-weight: bold;">GlassBottle</span> <span style="color: #2d9574;">"curvy bottle"</span>

<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">&#955;&gt; unpack' b</span>
<span style="color: #2aa1ae; background-color: #ecf3ec;">-- </span><span style="color: #2aa1ae; background-color: #ecf3ec;">Beer {feel = "Fresh bear from the curvy bottle."}</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgec04ba7" class="outline-3">
<h3 id="orgec04ba7"><span class="section-number-3">8.4</span> Zadaci 2</h3>
<div class="outline-text-3" id="text-8-4">
<p>
VaÅ¡a aplikacija je u produkciji i Äesto se deÅ¡ava neÅ¡to Äudno Å¡to
dovodi do otkaza. VaÅ¡ zadatak je da parsirate <a href="http://www.seas.upenn.edu/~cis194/spring13/extras/02-ADTs/error.log">logove</a> koje pravi
aplikacija i utvrdite Å¡ta je u pitanju. Pun opis zadatka i smernice
su na <a href="http://www.seas.upenn.edu/~cis194/spring13/hw/02-ADTs.pdf">cis194</a>. Potrebni fajlovi su:
</p>

<ul class="org-ul">
<li><a href="http://www.seas.upenn.edu/~cis194/spring13/extras/02-ADTs/sample.log">sample.log</a></li>
<li><a href="http://www.seas.upenn.edu/~cis194/spring13/extras/02-ADTs/Log.hs">Log.hs</a></li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org1456cad" class="outline-2">
<h2 id="org1456cad"><span class="section-number-2">9</span> Monoidi<sup><a id="fnr.6" class="footref" href="#fn.6">6</a></sup></h2>
<div class="outline-text-2" id="text-9">
<p>
Monoid je veoma jednostavan a moÄan koncept koji je obiÄno veoma
prirodan svakome od nas samo se u programiranju Äesto ne
koncentriÅ¡emo na njega. Sabiranje brojeva Äini monoid, MnoÅ¾enje Äini
monoid, Konkatenacija stringova Äini Monoid, <i>future</i>-i u
konkurentnom programiranju Äine Monoid, dogaÄaji (<i>events</i>) u
Functional Reactional Programming Äine monoid&#x2026; Definicija sa
osloncem na teoriju skupova bi bila:
</p>

<blockquote>
<p>
Monoid je set sa binarnom operacijom. Operacija mora da bude
asocijativn i da ima neutralni element (<i>unit</i>) u skupu.
</p>
</blockquote>

<p>
Na primer, \(\mathbb{N}\) (sa nulom) pri sabiranju Äini monoid:
</p>

<p>
\[(a + b) + c = a + (b + c)\]
</p>

<p>
Dakle vaÅ¾i asocijativnost. VaÅ¾i i:
</p>

<p>
\[a + 0 = a\]
</p>

<p>
Dakle nula je neutralni element.
</p>

<p>
<b>[Napomena]</b> Obratite paÅ¾nju da komutativnost nije zahtevana za
monoid iako za sabiranje (mnoÅ¾enje) vaÅ¾i <b>i</b> komutativnost.
</p>

<p>
Za stringove i konkatenaciju vaÅ¾i:
</p>

<div class="org-src-container">
<pre class="src src-haskell">(<span style="color: #2d9574;">"danas"</span> <span style="color: #715ab1;">++</span> <span style="color: #2d9574;">"sutra"</span>) <span style="color: #715ab1;">++</span> <span style="color: #2d9574;">"prekosutra"</span> <span style="color: #715ab1;">==</span> <span style="color: #2d9574;">"danas"</span> <span style="color: #715ab1;">++</span> (<span style="color: #2d9574;">"sutra"</span> <span style="color: #715ab1;">++</span> <span style="color: #2d9574;">"prekosutra"</span>)
</pre>
</div>

<p>
Prazan string je <i>unit</i>:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #2d9574;">"nesto"</span> <span style="color: #715ab1;">++</span> <span style="color: #2d9574;">""</span> <span style="color: #715ab1;">==</span> <span style="color: #2d9574;">"nesto"</span>
</pre>
</div>

<p>
Dakle, monoid u Haskell-u bi mogao da bude:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #3a81c3; font-weight: bold;">class</span> <span style="color: #ba2f59; font-weight: bold;">Monoid</span> m <span style="color: #3a81c3; font-weight: bold;">where</span>
  mempty <span style="color: #715ab1;">::</span> m
  mappend <span style="color: #715ab1;">::</span> m <span style="color: #715ab1;">-&gt;</span> m <span style="color: #715ab1;">-&gt;</span> m
</pre>
</div>

<p>
Pa bismo rekli da je String monoid sa konkatenacijom ovako:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #3a81c3; font-weight: bold;">instance</span> <span style="color: #ba2f59; font-weight: bold;">Monoid</span> <span style="color: #ba2f59; font-weight: bold;">String</span> <span style="color: #3a81c3; font-weight: bold;">where</span>
  mempty <span style="color: #715ab1;">=</span> <span style="color: #2d9574;">""</span>
  mappend <span style="color: #715ab1;">=</span> (<span style="color: #715ab1;">++</span>)
</pre>
</div>
</div>

<div id="outline-container-org2009bad" class="outline-3">
<h3 id="org2009bad"><span class="section-number-3">9.1</span> Monoid u teoriji kategorija</h3>
<div class="outline-text-3" id="text-9-1">
<p>
Monoid je kategorija sa jednim objektom sa mnogo morfizama (i
svakako <i>id</i> morfizmom kao neutralnim elementom).
</p>


<div class="figure">
<p><img src="images/monoid_pig.png" alt="monoid_pig.png" />
</p>
</div>

<p>
Da li od svakog kategoriÄkog monoida (monoida u teoriji kategorija)
moÅ¾e da se napravi skup (matematiÄki skup) sa pridruÅ¾enom binarnom
operacijom i da to Äini monoid (sada u teoriji skupova)?
</p>

<p>
Znamo da skup morfizama izmeÄu dva objekta zovemo <b>Hom-set</b>. U
njemu morfizmi Äine elemente. Rezultati monoidalnog produkta
(binarne operacije iz monoida) izmeÄu elemenata seta odgovaraju
kompoziciji morfizama u originalnoj kategoriji. Operacija je u toj
kategoriji asocijativna jer je kompozicija asocijativna. Neutralni
element je <i>id</i> morfizam.
</p>


<div class="figure">
<p><img src="images/monoid_set_and_cat.png" alt="monoid_set_and_cat.png" />
</p>
</div>

<p>
Istini za volju (i matematici), morfizmi ne formiraju uvek skup. Za
one kategorije kod kojih za svaka dva objekta morfizmi Äine skup
kaÅ¾emo da su <i>lokalno male</i> (<i>locally small</i>). Taj skup onda zovemo
Hom-set.
</p>
</div>
</div>
</div>

<div id="outline-container-org18422ba" class="outline-2">
<h2 id="org18422ba"><span class="section-number-2">10</span> Funktori<sup><a id="fnr.6.100" class="footref" href="#fn.6">6</a></sup></h2>
<div class="outline-text-2" id="text-10">
<p>
Ako posmatramo iz ugla teorije kategorija onda je Funktor takoÄe
prost koncept:
</p>

<blockquote>
<p>
Funktor je morfizam izmeÄu kategorija.
</p>
</blockquote>

<p>
Ako imamo dve kategorije \(C\) i \(D\), onda funktor \(F\) preslikava sve
objekte i morfizme iz \(C\) u \(D\) na takav naÄin da odrÅ¾ava strukturu
koja postoji u originalnoj kategoriji.
</p>

<p>
Ako postoji morfizam \(f\) u \(C\) takav da \[f :: a \rightarrow b\]
onda u kategoriji \(D\) pod dejstvoj funktora \(F\) postoji \[Ff :: Fa
  \rightarrow Fb\].
</p>


<div class="figure">
<p><img src="images/functor.png" alt="functor.png" />
</p>
</div>

<p>
OÄuvati strukturu znaÄi takoÄe i da sve Å¡to je bilo kompozicija u
izvornoj kategoriji ostaje kompozivija i u drugoj kategoriji (na
drugom kraju funktora). Dakle ako je postojao neki morfizam \(h\)
takav da je \[h = g \circ f\] onda u kategoriji \(D\), pod dejstvom
funktora \(F\), mora postojati morfizam \(Fh\) takav da vaÅ¾i \[Fh = Fg
  \circ Ff\].
</p>


<div class="figure">
<p><img src="images/functor_2.png" alt="functor_2.png" />
</p>
</div>

<p>
Na kraju, bitno je da <i>id</i> morfizmi iz \(C\) budu mapirani u <i>id</i>
morfizme u \(D\) tako da vaÅ¾i \[Fid_a = id_{F_a}\].
</p>


<div class="figure">
<p><img src="images/funct_ids.png" alt="funct_ids.png" />
</p>
</div>

<p>
Obratite paÅ¾nju da za funktore <b>nije neophodno</b> da \(C\) i \(D\)
kategorije budu razaliÄite. Funktori koji rade nad jednom istom
kategorjom se zovu <b>endofunktori</b>.
</p>
</div>

<div id="outline-container-org6ae78b0" class="outline-3">
<h3 id="org6ae78b0"><span class="section-number-3">10.1</span> Primeri funktora u programiranju</h3>
<div class="outline-text-3" id="text-10-1">
<p>
Primeri u Haskell-u predstavljaju endofunktore jer rade na jednom
kategorijom (<b>Hask</b> - <b>Type</b> kategorija sa pridruÅ¾enim <i>raÄunanjima
koja se nikada ne zavrÅ¡avaju</i> - <i>bottoms</i>).
</p>
</div>

<div id="outline-container-orgaae7e9b" class="outline-4">
<h4 id="orgaae7e9b"><span class="section-number-4">10.1.1</span> Maybe funktor</h4>
<div class="outline-text-4" id="text-10-1-1">
<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #3a81c3; font-weight: bold;">data</span> <span style="color: #ba2f59; font-weight: bold;">Maybe</span> a <span style="color: #715ab1;">=</span> <span style="color: #ba2f59; font-weight: bold;">Nothing</span> <span style="color: #715ab1;">|</span> <span style="color: #ba2f59; font-weight: bold;">Just</span> a
</pre>
</div>

<p>
Kako bismo ispoÅ¡tovali zahtev da funktor oÄuvava strukturu ("radi"
i nad morfizmima, funkcijama) moramo za svaku funkciju koja ima
potpis:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #6c3163; font-weight: bold;">f</span> <span style="color: #715ab1;">::</span> a <span style="color: #715ab1;">-&gt;</span> b
</pre>
</div>

<p>
imati mehanizam koji Äe nam napraviti funkciju sa potpisom:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #6c3163; font-weight: bold;">f'</span> <span style="color: #715ab1;">::</span> <span style="color: #ba2f59; font-weight: bold;">Maybe</span> a <span style="color: #715ab1;">-&gt;</span> <span style="color: #ba2f59; font-weight: bold;">Maybe</span> b
</pre>
</div>

<p>
koja Äe predstavljati morfizam \(f\) u kategoriji \(D\).
</p>

<p>
Haskell-ov mehanizam za dobijanje takve funkcije je funkcija viÅ¡eg
reda koja se zove <code>fmap</code> i ima potpis:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #6c3163; font-weight: bold;">fmap</span> <span style="color: #715ab1;">::</span> (a <span style="color: #715ab1;">-&gt;</span> b) <span style="color: #715ab1;">-&gt;</span> (<span style="color: #ba2f59; font-weight: bold;">Maybe</span> a <span style="color: #715ab1;">-&gt;</span> <span style="color: #ba2f59; font-weight: bold;">Maybe</span> b)
</pre>
</div>


<div class="figure">
<p><img src="images/fmap.png" alt="fmap.png" />
</p>
</div>

<p>
<code>fmap</code> zbog <i>Curry</i>-inga moÅ¾emo posmatrati i kao funkciju dva
parametra od kojih je prvi funkcija. Tako bismo za <i>Maybe</i> mogli
da implementiramo <code>fmap</code> ovako:
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #6c3163; font-weight: bold;">fmap</span> <span style="color: #3a81c3; font-weight: bold;">_</span> <span style="color: #ba2f59; font-weight: bold;">Nothing</span> <span style="color: #715ab1;">=</span> <span style="color: #ba2f59; font-weight: bold;">Nothing</span>
<span style="color: #6c3163; font-weight: bold;">fmap</span> f (<span style="color: #ba2f59; font-weight: bold;">Just</span> x) <span style="color: #715ab1;">=</span> <span style="color: #ba2f59; font-weight: bold;">Just</span> (f x)
</pre>
</div>

<p>
<a href="http://learnyouahaskell.com/">Learn Some Haskell For The Great Good</a> funktore objaÅ¡njava
analogijom kutije za pakovanje, a <code>fmap</code> kao funkciju koja se
primenjuje samo na sadrÅ¾aj i onda novi sadrÅ¾aj upakuje u istu
kutiju.
</p>

<blockquote>
<p>
Da li Vam ta analogija deluje prirodno?
</p>
</blockquote>

<p>
Studentima se za veÅ¾bu ostavlja da odgovore:
</p>
<ul class="org-ul">
<li>Da li je lista funktor?</li>
<li>NapiÅ¡ite instancu <code>Functor</code>-a za listu.</li>
<li>ZaÅ¡to Haskelleri insistiraju na <code>fmap</code> pre nego na <code>map</code> (iako
postoji u Haskell-u), odakle im to?</li>
</ul>
</div>
</div>
</div>
</div>

<div id="outline-container-orgcf4c239" class="outline-2">
<h2 id="orgcf4c239"><span class="section-number-2">11</span> Aplikativni funktori</h2>
</div>
<div id="outline-container-orgaad5ad3" class="outline-2">
<h2 id="orgaad5ad3"><span class="section-number-2">12</span> Monade<sup><a id="fnr.6.100" class="footref" href="#fn.6">6</a></sup></h2>
<div class="outline-text-2" id="text-12">
</div>
<div id="outline-container-orgc0c85a4" class="outline-3">
<h3 id="orgc0c85a4"><span class="section-number-3">12.1</span> Kleisli kategorija</h3>
</div>
</div>
<div id="outline-container-org3cb0d92" class="outline-2">
<h2 id="org3cb0d92"><span class="section-number-2">13</span> Profiling</h2>
<div class="outline-text-2" id="text-13">
<p>
<b>ZaÅ¡to je ovaj program spor?</b>
</p>

<p>
<b>ZaÅ¡to ovaj program koristi ovoliko memorije?</b>
</p>

<p>
<a href="https://en.wikipedia.org/wiki/Profiling_(computer_programming)">Profiling</a> je dinamiÄka ili statiÄka analiza programa koja sluÅ¾i da
izmeri koliko i kako program troÅ¡i resurse. Informacije koje daju
profiler-i koriste se za optimizaciju.
</p>

<p>
Kod funkcionalnih jezika osnovni nivo profiling-a odnosi se na
merenje potroÅ¡nje resursa koju program pravi pri pozivu pojedinih
funkcija.
</p>

<p>
<b>Haskell funkcija A koristi funkciju A1</b> <br />
<b>Haskell funkcija A1 koristi funkciju A2</b> <br />
<b>Haskell funkcija B koristi funkciju B1</b> <br />
<b>Haskell funkcija B1 koristi funkciju B2</b> <br />
<b>Haskell funkcija A1 je spora i troÅ¡i previÅ¡e memorije. Å ta nam
garantuje da to nije zbog B1?</b>
</p>
</div>

<div id="outline-container-org6f1bf9f" class="outline-3">
<h3 id="org6f1bf9f"><span class="section-number-3">13.1</span> Primitivni profiling samo sa Unix <code>time</code></h3>
</div>
<div id="outline-container-org5f79b08" class="outline-3">
<h3 id="org5f79b08"><span class="section-number-3">13.2</span> GHC podrÅ¡ka za profiling</h3>
<div class="outline-text-3" id="text-13-2">
<p>
Izvodi se u tri koraka:
</p>

<ol class="org-ol">
<li><p>
Kompajliranje programa za profiling
</p>

<p>
GHC ubaci delove koda koji nam omoguÄavaju da u vreme
izvrÅ¡avanja dobijamo informacije za profiling. To se mora
naglasiti posebnim opcijama koje se daju kompajleru (pun spisak
opcija potraÅ¾iti <a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/profiling.html">ovde</a>):
</p>

<div class="org-src-container">
<pre class="src src-shell">ghc -prof -fprof-auto-top -rtsopts Modul.hs
</pre>
</div>

<p>
MoguÄe je ubaciti odgovarajuÄu pragmu (<i>cost centre annotation</i>)
na mesta u porgramu koja posebno Å¾elimo da "merimo":
</p>

<div class="org-src-container">
<pre class="src src-haskell"><span style="color: #6c3163;">{-# SCC ime_za_merenje #-}</span>
</pre>
</div>

<p>
Primer programa koji koristi eksplicitne <i>cost</i> centre je dat u
nastavku:
</p>

<p>
<a id="orgb266a91"></a>
</p>
<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 3: </span>haskellNTP/profiling/src/ExplicitCostCenters.hs</label><pre class="src src-haskell"><span style="color: #6c3163; font-weight: bold;">explicitCostCenters</span> <span style="color: #715ab1;">::</span> <span style="color: #ba2f59; font-weight: bold;">IO</span> <span style="color: #ba2f59; font-weight: bold;">()</span>
<span style="color: #6c3163; font-weight: bold;">explicitCostCenters</span> <span style="color: #715ab1;">=</span> <span style="color: #3a81c3; font-weight: bold;">do</span> print <span style="color: #715ab1;">$</span> <span style="color: #6c3163;">{-# SCC last_xs #-}</span> last xs
                         print <span style="color: #715ab1;">$</span> <span style="color: #6c3163;">{-# SCC last_init_xs #-}</span> last <span style="color: #715ab1;">$</span> init xs
                         print <span style="color: #715ab1;">$</span> <span style="color: #6c3163;">{-# SCC last_ys #-}</span> last ys
                         print <span style="color: #715ab1;">$</span> <span style="color: #6c3163;">{-# SCC last_init_ys #-}</span> last <span style="color: #715ab1;">$</span> init ys
                           <span style="color: #3a81c3; font-weight: bold;">where</span> xs <span style="color: #715ab1;">=</span> [1<span style="color: #715ab1;">..</span>1000000]
                                 ys <span style="color: #715ab1;">=</span> [1<span style="color: #715ab1;">..</span>2000000]
</pre>
</div>

<p>
Kako bi ovakva mesta u programu bila merena potrebno je da pri
kompajliranju <a href="https://downloads.haskell.org/~ghc/7.8.2/docs/html/users_guide/prof-compiler-options.html">bude omoguÄena opcija <code>-prof</code></a>.
</p>

<p>
Ako projekat koristi <i>stack</i> sliÄan efekat komandi gore se moÅ¾e
postiÄi na sledeÄi naÄin (imajte u vidu da <code>Stack</code> koristi
<code>Cabal</code> a tek <code>Cabal</code> prosleÄuje opcije GHC-u, pogledati <a href="https://github.com/commercialhaskell/stack/blob/master/doc/GUIDE.md#debugging">ovde</a>):
</p>

<div class="org-src-container">
<pre class="src src-shell">stack build --library-profiling --executable-profiling <span style="color: #2d9574;">\</span>
      --ghc-options=<span style="color: #2d9574;">"-fno-prof-cafs -rtsopts"</span>
</pre>
</div></li>

<li><p>
Pokretanje programa sa omoguÄenim opcijama za profiling
</p>

<div class="org-src-container">
<pre class="src src-shell">./projekat-exe +RTS -p
</pre>
</div>

<p>
Pun spisak <i>RTS</i> opcija moÅ¾ete pogledati <a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/profiling.html#time-and-allocation-profiling">ovde</a>.
</p>

<p>
Ako koristite <i>stack</i>:
</p>

<div class="org-src-container">
<pre class="src src-shell">stack exec -- projekat-exe +RTS -p
</pre>
</div></li>

<li><p>
Analiza rezultata
</p>

<p>
Ako ste program izvrÅ¡ili sa RTS opcijom <code>-p</code> onda ste dobili
fajl <code>program.prof</code> u kome se nalaze rezultati za analizu.
</p>

<p>
Ako izvrÅ¡imo prethodna dva koraka sa programom datim <a href="#orgb266a91">ranije</a> naÅ¡
<code>.prof</code> file Äe liÄiti na:
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 4: </span>haskellNTP/profiling/profiling-exe-manual-CAFS.prof</label><pre class="src src-fundamental">        Mon Mar  6 14:59 2017 Time and Allocation Profiling Report  (Final)

           profiling-exe +RTS -N -p -RTS

        total time  =        0.16 secs   (163 ticks @ 1000 us, 1 processor)
        total alloc = 384,079,344 bytes  (excludes profiling overheads)

COST CENTRE  MODULE SRC                   %time %alloc

main.ys      Main   app/Main.hs:28:17-33   42.3   37.5
last_init_ys Main   app/Main.hs:26:44-57   20.9   29.2
main.xs      Main   app/Main.hs:27:17-33   18.4   18.7
last_init_xs Main   app/Main.hs:24:44-57   11.0   14.6
last_ys      Main   app/Main.hs:25:39-45    3.7    0.0
last_xs      Main   app/Main.hs:23:39-45    3.1    0.0


                                                                                    individual      inherited
COST CENTRE     MODULE                SRC                        no.     entries  %time %alloc   %time %alloc

MAIN            MAIN                  &lt;built-in&gt;                  46          0    0.6    0.0   100.0  100.0
 CAF            Main                  &lt;entire-module&gt;             91          0    0.0    0.0    99.4  100.0
  main          Main                  app/Main.hs:(23,1)-(28,33)  92          1    0.0    0.0    99.4  100.0
   last_init_xs Main                  app/Main.hs:24:44-57        96          1   11.0   14.6    11.0   14.6
   last_init_ys Main                  app/Main.hs:26:44-57        99          1   20.9   29.2    20.9   29.2
   last_xs      Main                  app/Main.hs:23:39-45        94          1    3.1    0.0     3.1    0.0
   last_ys      Main                  app/Main.hs:25:39-45        97          1    3.7    0.0     3.7    0.0
   main.xs      Main                  app/Main.hs:27:17-33        95          1   18.4   18.7    18.4   18.7
   main.ys      Main                  app/Main.hs:28:17-33        98          1   42.3   37.5    42.3   37.5
 CAF            GHC.IO.Handle.FD      &lt;entire-module&gt;             88          0    0.0    0.0     0.0    0.0
 CAF            GHC.Event.Thread      &lt;entire-module&gt;             86          0    0.0    0.0     0.0    0.0
 CAF            GHC.IO.Encoding       &lt;entire-module&gt;             85          0    0.0    0.0     0.0    0.0
 CAF            GHC.IO.Handle.Text    &lt;entire-module&gt;             84          0    0.0    0.0     0.0    0.0
 CAF            GHC.Conc.Signal       &lt;entire-module&gt;             81          0    0.0    0.0     0.0    0.0
 CAF            GHC.Event.Poll        &lt;entire-module&gt;             74          0    0.0    0.0     0.0    0.0
 CAF            GHC.IO.Encoding.Iconv &lt;entire-module&gt;             70          0    0.0    0.0     0.0    0.0
 CAF            GHC.Event.EPoll       &lt;entire-module&gt;             64          0    0.0    0.0     0.0    0.0
 main           Main                  app/Main.hs:(23,1)-(28,33)  93          0    0.0    0.0     0.0    0.0
</pre>
</div></li>
</ol>
</div>

<div id="outline-container-org6449fc2" class="outline-4">
<h4 id="org6449fc2"><span class="section-number-4">13.2.1</span> JoÅ¡ neke <i>RTS</i> (<i>Run Time System</i>) opcije</h4>
<div class="outline-text-4" id="text-13-2-1">
<p>
Ako programu od <a href="#orgb266a91">ranije</a> pro pokretanju prosledimo opciju <code>-pa</code>
dobiÄemo Å¡iri izveÅ¡taj o koriÅ¡Äenju resursa koji Äe obuhvatati i
podatke o alokaciji memorije:
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 5: </span>haskellNTP/profiling/profiling-exe-pa.prof</label><pre class="src src-fundamental">        Mon Mar  6 15:27 2017 Time and Allocation Profiling Report  (Final)

           profiling-exe +RTS -N -pa -RTS

        total time  =        0.58 secs   (577 ticks @ 1000 us, 1 processor)
        total alloc = 384,115,072 bytes  (excludes profiling overheads)

COST CENTRE  MODULE                  SRC                         %time %alloc  ticks     bytes

GC           GC                      &lt;built-in&gt;                   72.3    0.0    417         0
main.ys      Main                    app/Main.hs:28:17-33          9.4   37.5     54 144000016
last_init_ys Main                    app/Main.hs:26:44-57          6.4   29.2     37 111999960
main.xs      Main                    app/Main.hs:27:17-33          5.4   18.7     31  72000016
last_init_xs Main                    app/Main.hs:24:44-57          3.6   14.6     21  55999960
last_ys      Main                    app/Main.hs:25:39-45          1.0    0.0      6        16
last_xs      Main                    app/Main.hs:23:39-45          1.0    0.0      6        16
SYSTEM       SYSTEM                  &lt;built-in&gt;                    0.9    0.0      5     35728
IDLE         IDLE                    &lt;built-in&gt;                    0.0    0.0      0         0
PINNED       SYSTEM                  &lt;built-in&gt;                    0.0    0.0      0         0
DONT_CARE    MAIN                    &lt;built-in&gt;                    0.0    0.0      0         0
OVERHEAD_of  PROFILING               &lt;built-in&gt;                    0.0    0.0      0         0
MAIN         MAIN                    &lt;built-in&gt;                    0.0    0.0      0     22824
CAF          GHC.Integer.Type        &lt;entire-module&gt;               0.0    0.0      0         0
CAF          GHC.Err                 &lt;entire-module&gt;               0.0    0.0      0         0
CAF          GHC.Enum                &lt;entire-module&gt;               0.0    0.0      0         0
CAF          Foreign.Marshal.Alloc   &lt;entire-module&gt;               0.0    0.0      0         0
CAF          GHC.Event.PSQ           &lt;entire-module&gt;               0.0    0.0      0         0
CAF          GHC.Event.Manager       &lt;entire-module&gt;               0.0    0.0      0         0
CAF          GHC.Event.Array         &lt;entire-module&gt;               0.0    0.0      0         0
CAF          GHC.Stack.CCS           &lt;entire-module&gt;               0.0    0.0      0         0
CAF          GHC.IO.Encoding.UTF32   &lt;entire-module&gt;               0.0    0.0      0         0
CAF          GHC.IO.Encoding.Latin1  &lt;entire-module&gt;               0.0    0.0      0         0
CAF          GHC.Event.TimerManager  &lt;entire-module&gt;               0.0    0.0      0         0
CAF          GHC.Event.EPoll         &lt;entire-module&gt;               0.0    0.0      0        48
CAF          GHC.Show                &lt;entire-module&gt;               0.0    0.0      0         0
CAF          GHC.IO.Handle.Types     &lt;entire-module&gt;               0.0    0.0      0         0
CAF          GHC.IO.FD               &lt;entire-module&gt;               0.0    0.0      0         0
CAF          GHC.IO.Encoding.UTF8    &lt;entire-module&gt;               0.0    0.0      0         0
CAF          GHC.IO.Encoding.UTF16   &lt;entire-module&gt;               0.0    0.0      0         0
CAF          GHC.IO.Encoding.Iconv   &lt;entire-module&gt;               0.0    0.0      0       232
CAF          GHC.IO.Encoding.Failure &lt;entire-module&gt;               0.0    0.0      0         0
CAF          GHC.Exception           &lt;entire-module&gt;               0.0    0.0      0         0
CAF          GHC.Arr                 &lt;entire-module&gt;               0.0    0.0      0         0
CAF          GHC.Event.Poll          &lt;entire-module&gt;               0.0    0.0      0        96
CAF          GHC.Event.Internal      &lt;entire-module&gt;               0.0    0.0      0         0
CAF          System.Posix.Internals  &lt;entire-module&gt;               0.0    0.0      0         0
CAF          GHC.IO.Handle.Internals &lt;entire-module&gt;               0.0    0.0      0         0
CAF          GHC.IO.Handle           &lt;entire-module&gt;               0.0    0.0      0         0
CAF          GHC.ForeignPtr          &lt;entire-module&gt;               0.0    0.0      0         0
CAF          GHC.Conc.Sync           &lt;entire-module&gt;               0.0    0.0      0         0
CAF          GHC.Conc.Signal         &lt;entire-module&gt;               0.0    0.0      0       640
CAF          GHC.Event.Control       &lt;entire-module&gt;               0.0    0.0      0         0
CAF          GHC.List                &lt;entire-module&gt;               0.0    0.0      0         0
CAF          GHC.IO.Handle.Text      &lt;entire-module&gt;               0.0    0.0      0        88
CAF          GHC.IO.Encoding         &lt;entire-module&gt;               0.0    0.0      0      2872
CAF          GHC.Event.Thread        &lt;entire-module&gt;               0.0    0.0      0      1232
CAF          GHC.TopHandler          &lt;entire-module&gt;               0.0    0.0      0         0
CAF          GHC.IO.Handle.FD        &lt;entire-module&gt;               0.0    0.0      0     34512
CAF          GHC.IO.Exception        &lt;entire-module&gt;               0.0    0.0      0         0
CAF          Control.Exception.Base  &lt;entire-module&gt;               0.0    0.0      0         0
main         Main                    app/Main.hs:(23,1)-(28,33)    0.0    0.0      0     16800
CAF          Main                    &lt;entire-module&gt;               0.0    0.0      0        16


                                                                                      individual      inherited
COST CENTRE     MODULE                  SRC                        no.     entries  %time %alloc   %time %alloc  ticks     bytes

MAIN            MAIN                    &lt;built-in&gt;                  46          0    0.0    0.0   100.0  100.0      0     22824
 CAF            Main                    &lt;entire-module&gt;             91          0    0.0    0.0    26.9  100.0      0        16
  main          Main                    app/Main.hs:(23,1)-(28,33)  92          1    0.0    0.0    26.9  100.0      0      1208
   last_init_xs Main                    app/Main.hs:24:44-57        96          1    3.6   14.6     3.6   14.6     21  55999960
   last_init_ys Main                    app/Main.hs:26:44-57        99          1    6.4   29.2     6.4   29.2     37 111999960
   last_xs      Main                    app/Main.hs:23:39-45        94          1    1.0    0.0     1.0    0.0      6        16
   last_ys      Main                    app/Main.hs:25:39-45        97          1    1.0    0.0     1.0    0.0      6        16
   main.xs      Main                    app/Main.hs:27:17-33        95          1    5.4   18.7     5.4   18.7     31  72000016
   main.ys      Main                    app/Main.hs:28:17-33        98          1    9.4   37.5     9.4   37.5     54 144000016
 CAF            Control.Exception.Base  &lt;entire-module&gt;             90          0    0.0    0.0     0.0    0.0      0         0
 CAF            GHC.IO.Exception        &lt;entire-module&gt;             89          0    0.0    0.0     0.0    0.0      0         0
 CAF            GHC.IO.Handle.FD        &lt;entire-module&gt;             88          0    0.0    0.0     0.0    0.0      0     34512
 CAF            GHC.TopHandler          &lt;entire-module&gt;             87          0    0.0    0.0     0.0    0.0      0         0
 CAF            GHC.Event.Thread        &lt;entire-module&gt;             86          0    0.0    0.0     0.0    0.0      0      1232
 CAF            GHC.IO.Encoding         &lt;entire-module&gt;             85          0    0.0    0.0     0.0    0.0      0      2872
 CAF            GHC.IO.Handle.Text      &lt;entire-module&gt;             84          0    0.0    0.0     0.0    0.0      0        88
 CAF            GHC.List                &lt;entire-module&gt;             83          0    0.0    0.0     0.0    0.0      0         0
 CAF            GHC.Event.Control       &lt;entire-module&gt;             82          0    0.0    0.0     0.0    0.0      0         0
 CAF            GHC.Conc.Signal         &lt;entire-module&gt;             81          0    0.0    0.0     0.0    0.0      0       640
 CAF            GHC.Conc.Sync           &lt;entire-module&gt;             80          0    0.0    0.0     0.0    0.0      0         0
 CAF            GHC.ForeignPtr          &lt;entire-module&gt;             79          0    0.0    0.0     0.0    0.0      0         0
 CAF            GHC.IO.Handle           &lt;entire-module&gt;             78          0    0.0    0.0     0.0    0.0      0         0
 CAF            GHC.IO.Handle.Internals &lt;entire-module&gt;             77          0    0.0    0.0     0.0    0.0      0         0
 CAF            System.Posix.Internals  &lt;entire-module&gt;             76          0    0.0    0.0     0.0    0.0      0         0
 CAF            GHC.Event.Internal      &lt;entire-module&gt;             75          0    0.0    0.0     0.0    0.0      0         0
 CAF            GHC.Event.Poll          &lt;entire-module&gt;             74          0    0.0    0.0     0.0    0.0      0        96
 CAF            GHC.Arr                 &lt;entire-module&gt;             73          0    0.0    0.0     0.0    0.0      0         0
 CAF            GHC.Exception           &lt;entire-module&gt;             72          0    0.0    0.0     0.0    0.0      0         0
 CAF            GHC.IO.Encoding.Failure &lt;entire-module&gt;             71          0    0.0    0.0     0.0    0.0      0         0
 CAF            GHC.IO.Encoding.Iconv   &lt;entire-module&gt;             70          0    0.0    0.0     0.0    0.0      0       232
 CAF            GHC.IO.Encoding.UTF16   &lt;entire-module&gt;             69          0    0.0    0.0     0.0    0.0      0         0
 CAF            GHC.IO.Encoding.UTF8    &lt;entire-module&gt;             68          0    0.0    0.0     0.0    0.0      0         0
 CAF            GHC.IO.FD               &lt;entire-module&gt;             67          0    0.0    0.0     0.0    0.0      0         0
 CAF            GHC.IO.Handle.Types     &lt;entire-module&gt;             66          0    0.0    0.0     0.0    0.0      0         0
 CAF            GHC.Show                &lt;entire-module&gt;             65          0    0.0    0.0     0.0    0.0      0         0
 CAF            GHC.Event.EPoll         &lt;entire-module&gt;             64          0    0.0    0.0     0.0    0.0      0        48
 CAF            GHC.Event.TimerManager  &lt;entire-module&gt;             63          0    0.0    0.0     0.0    0.0      0         0
 CAF            GHC.IO.Encoding.Latin1  &lt;entire-module&gt;             62          0    0.0    0.0     0.0    0.0      0         0
 CAF            GHC.IO.Encoding.UTF32   &lt;entire-module&gt;             61          0    0.0    0.0     0.0    0.0      0         0
 CAF            GHC.Stack.CCS           &lt;entire-module&gt;             60          0    0.0    0.0     0.0    0.0      0         0
 CAF            GHC.Event.Array         &lt;entire-module&gt;             59          0    0.0    0.0     0.0    0.0      0         0
 CAF            GHC.Event.Manager       &lt;entire-module&gt;             58          0    0.0    0.0     0.0    0.0      0         0
 CAF            GHC.Event.PSQ           &lt;entire-module&gt;             57          0    0.0    0.0     0.0    0.0      0         0
 CAF            Foreign.Marshal.Alloc   &lt;entire-module&gt;             56          0    0.0    0.0     0.0    0.0      0         0
 CAF            GHC.Enum                &lt;entire-module&gt;             55          0    0.0    0.0     0.0    0.0      0         0
 CAF            GHC.Err                 &lt;entire-module&gt;             54          0    0.0    0.0     0.0    0.0      0         0
 CAF            GHC.Integer.Type        &lt;entire-module&gt;             53          0    0.0    0.0     0.0    0.0      0         0
 DONT_CARE      MAIN                    &lt;built-in&gt;                  49          0    0.0    0.0     0.0    0.0      0         0
 GC             GC                      &lt;built-in&gt;                  51          0   72.3    0.0    72.3    0.0    417         0
 IDLE           IDLE                    &lt;built-in&gt;                  47          0    0.0    0.0     0.0    0.0      0         0
 OVERHEAD_of    PROFILING               &lt;built-in&gt;                  50          0    0.0    0.0     0.0    0.0      0         0
 PINNED         SYSTEM                  &lt;built-in&gt;                  48          0    0.0    0.0     0.0    0.0      0         0
 SYSTEM         SYSTEM                  &lt;built-in&gt;                  52          0    0.9    0.0     0.9    0.0      5     35728
 main           Main                    app/Main.hs:(23,1)-(28,33)  93          0    0.0    0.0     0.0    0.0      0     15592
</pre>
</div>

<p>
Listu ostalih opcija moÅ¾ete pogledati <a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/profiling.html#time-and-allocation-profiling">ovde</a>.
</p>
</div>
</div>

<div id="outline-container-org263daa0" class="outline-4">
<h4 id="org263daa0"><span class="section-number-4">13.2.2</span> PotroÅ¡nja memorije kroz vreme</h4>
<div class="outline-text-4" id="text-13-2-2">
<p>
Ponekada je korisno pratiti i potroÅ¡nju memorije kroz
vreme. Ovakvi izveÅ¡taji mogu lepo pokazati kojom dinamikom dolazi
do <i>out of memory</i> greÅ¡aka i zaÅ¡to.
</p>

<p>
Kako bismo pokrenuli program tako da dobijemo <i>heap</i> profil
potrebno je da koristimo <i>RTS</i> opciju <code>-h</code> (ili neku drugu opciju
koja nam omoguÄuje inspekciju koriÅ¡Äenja <i>heap</i>-a, a puna lista je
data <a href="https://downloads.haskell.org/~ghc/latest/docs/html/users_guide/profiling.html#rts-options-for-heap-profiling">ovde</a>). I nakon toga dobijamo fajl <code>program.hp</code> u kome se
nalaze merenja koja liÄe na:
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 6: </span>haskellNTP/profiling/profiling-exe-basic.hp</label><pre class="src src-fundamental">JOB <span style="color: #2d9574;">"profiling-exe +RTS -N -h"</span>
DATE <span style="color: #2d9574;">"Mon Mar  6 15:38 2017"</span>
SAMPLE_UNIT <span style="color: #2d9574;">"seconds"</span>
VALUE_UNIT <span style="color: #2d9574;">"bytes"</span>
BEGIN_SAMPLE 0.000000
END_SAMPLE 0.000000
BEGIN_SAMPLE 0.200000
(48)PINNED      32720
(81)GHC.Conc.Signal.CAF 640
(88)GHC.IO.Handle.FD.CAF        680
(84)GHC.IO.Handle.Text.CAF      24
(93)main        144
(91)Main.CAF    48
MAIN    9960
(74)GHC.Event.Poll.CAF  24
(86)GHC.Event.Thread.CAF        560
(70)GHC.IO.Encoding.Iconv.CAF   120
(85)GHC.IO.Encoding.CAF 1168
(98)main.ys/main/Main.CAF       56795872
END_SAMPLE 0.200000
BEGIN_SAMPLE 0.272000
END_SAMPLE 0.272000
</pre>
</div>

<p>
za vizualizaciju ovih rezultata moÅ¾e se koristiti program <code>hp2ps</code>:
</p>

<div class="org-src-container">
<pre class="src src-shell">stack exec -- hp2ps -d program-exe.hp
</pre>
</div>

<p>
Za program:
</p>

<div class="org-src-container">
<label class="org-src-name"><span class="listing-number">Listing 7: </span>haskellNTP/profiling/src/Mean.hs</label><pre class="src src-haskell"><span style="color: #3a81c3; font-weight: bold;">import</span>           <span style="color: #ba2f59; font-weight: bold;">System.Environment</span>
<span style="color: #3a81c3; font-weight: bold;">import</span>           <span style="color: #ba2f59; font-weight: bold;">Text.Printf</span>

<span style="color: #6c3163; font-weight: bold;">meanMain</span> <span style="color: #715ab1;">=</span> <span style="color: #3a81c3; font-weight: bold;">do</span> [d] <span style="color: #715ab1;">&lt;-</span> map read <span style="color: #715ab1;">`fmap`</span> getArgs
              printf <span style="color: #2d9574;">"%f\n"</span> (mean [1 <span style="color: #715ab1;">..</span> d])

<span style="color: #6c3163; font-weight: bold;">mean</span> <span style="color: #715ab1;">::</span> [<span style="color: #ba2f59; font-weight: bold;">Double</span>] <span style="color: #715ab1;">-&gt;</span> <span style="color: #ba2f59; font-weight: bold;">Double</span>
<span style="color: #6c3163; font-weight: bold;">mean</span> xs <span style="color: #715ab1;">=</span> sum xs <span style="color: #715ab1;">/</span> fromIntegral (length xs)
</pre>
</div>


<div class="figure">
<p><img src="images/profiling-exe-mean.jpg" alt="profiling-exe-mean.jpg" width="600px" />
</p>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-org4a4c7bb" class="outline-2">
<h2 id="org4a4c7bb"><span class="section-number-2">14</span> Haskell Core&#xa0;&#xa0;&#xa0;<span class="tag"><span class="za_radoznale">za_radoznale</span></span></h2>
<div class="outline-text-2" id="text-14">
<p>
Kada <i>profiling</i> ne daje dovoljno dobar uvid u to Å¡ta program radi
na niskim nivoima onda moÅ¾da razumevanja <i>Haskell Core-a</i> moÅ¾e da
pomogne.
</p>

<p>
<a href="https://ghc.haskell.org/trac/ghc/wiki/Commentary/Compiler/CoreSynType"><i>Haskell Core</i></a> je "jednostavan funkcionalan jezik" koji <i>GHC</i>
koristi kao <i>intermediate</i> reprezentaciju programa. <i>GHC</i> optimizuje
programe tako Å¡to ih sukcesivno transformiÅ¡e u sve efikasnije
forme. <i>Core</i> predstavlja poslednji nivo na kome se oÄuvavaju
pravila funkcionalnog programiranja pre prevoÄenja na imperativni -
kod niskog nivoa (za Å¡ta se kod <i>GHC</i>-a koriste <a href="https://ghc.haskell.org/trac/ghc/wiki/Commentary/Compiler/GeneratedCode"><i>STG</i></a> i <i>C--</i>).
</p>

<p>
<i>Core</i> je za razliku od Haskell-a veoma jednostavan jezik. Njegova
sintaksa se moÅ¾e opisati u 20-ak linija, eksplicitno je tipiziran. I
<i>sve konstrukcije u Haskell-u mogu se predstaviti pomoÄu Core
jezika</i>.
</p>

<p>
Kako bismo od kompajlera trÅ¾ili da nam pokaÅ¾e <i>Core</i> verziju naÅ¡eg
programa treba da mu prosledimo opciju <code>-ddump-simpl</code> ili da
koristimo <code>ghc-core</code> alat koji to (uz joÅ¡ par stvari) uradi za
nas. Ako projekat koristi <i>Stack</i> onda se to moÅ¾e uratiti na sledeÄi
naÄin:
</p>

<p>
Instalirati <code>ghc-core</code>:
</p>

<div class="org-src-container">
<pre class="src src-shell">stack install ghc-core
</pre>
</div>

<p>
<i>Stack</i> Äe moÅ¾da upozoriti da nema specificiranih verzija
<i>dependencies</i>-a ali Äe dati i predlog Å¡ta treba uraditi, npr:
</p>

<div class="org-src-container">
<pre class="src src-fundamental">Recommended action: try adding the following to your extra-deps in
/.../haskellNTP/profiling/stack.yaml:
- colorize-haskell-1.0.1
</pre>
</div>

<p>
PosluÅ¡aÄemo predlog i izmeniti odgovarajuÄu liniju u <code>stack.yaml</code>
projekta na:
</p>

<div class="org-src-container">
<pre class="src src-yaml"><span style="color: #715ab1;">extra-deps</span>: [colorize-haskell-1.0.1]
</pre>
</div>

<p>
Nakon toga moÅ¾emo ponovo pokrenuti instalaciju i posle toga:
</p>

<div class="org-src-container">
<pre class="src src-shell">stack exec -- ghc-core app/Main.hs
</pre>
</div>

<p>
Å to Äe na terminal ispisati sve transformacije naÅ¡eg programa pa
tako moÅ¾emo ispratiti Å¡ta taÄno radi kompajler.
</p>

<p>
<i>GHC</i> nam omoguÄuje da ispitujemo sve njegove nivoe kompajliranja pa
tako i sam asembler na kraju. O tome moÅ¾ete Äitati na kraju <a href="http://book.realworldhaskell.org/read/profiling-and-optimization.html">ovog</a>
poglavlja <i>Real World Haskell</i>-a.
</p>
</div>
</div>
<div id="outline-container-org00f5687" class="outline-2">
<h2 id="org00f5687"><span class="section-number-2">15</span> Literatura</h2>
<div class="outline-text-2" id="text-15">
<ul class="org-ul">
<li><a href="http://learnyouahaskell.com/">Learn Some Haskell For The Great Good</a></li>
<li><a href="https://wiki.haskell.org/Introduction">Haskell wiki</a></li>
<li><a href="http://book.realworldhaskell.org/">Real World Haskell</a> (odliÄna knjiga ali nije davno aÅ¾urirana)</li>
<li><a href="http://www.seas.upenn.edu/~cis194/">Kursevi na Pensilvanija univerzitetu</a> (<i>spring13</i>, <i>fall16</i> ili
bilo koji drugi po izboru.)</li>
</ul>
</div>
<div id="outline-container-org2b476ab" class="outline-3">
<h3 id="org2b476ab"><span class="section-number-3">15.1</span> Teorija kategorija i programiranje</h3>
<div class="outline-text-3" id="text-15-1">
<ul class="org-ul">
<li><a href="https://github.com/hmemcpy/milewski-ctfp-pdf">Category Theory for Programmers</a> (knjiga)</li>
<li><a href="https://www.youtube.com/watch?v=I8LbkfSSR58&amp;list=PLbgaMIhjbmEnaH_LTkxLI7FMa2HsnawM_">Category Theory predavanja BartoÅ¡a Milevskog</a></li>
</ul>
</div>
</div>
</div>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">

<div class="footdef"><sup><a id="fn.1" class="footnum" href="#fnr.1">1</a></sup> <div class="footpara"><p class="footpara">
Ovaj deo je uglavnom preuzet sa <a href="http://www.seas.upenn.edu/~cis194/spring13/lectures/01-intro.html">cis194</a> (koji svakako
preporuÄujem u celini :) ).
</p></div></div>

<div class="footdef"><sup><a id="fn.2" class="footnum" href="#fnr.2">2</a></sup> <div class="footpara"><p class="footpara">
Naravno, sve se moÅ¾e ako je Äovek dovoljno uporan, samo nije
uvek najpametnije.
</p></div></div>

<div class="footdef"><sup><a id="fn.3" class="footnum" href="#fnr.3">3</a></sup> <div class="footpara"><p class="footpara">
Teorija koja stoji iza Haksell-a zapravo Äesto ima priliÄno
prostu alternativu mutiranju i sliÄnim problemima. Teorija kategorija
bi kategoriju koja takve probleme opisuje zvala <a href="https://bartoszmilewski.com/2014/12/23/kleisli-categories/">Kleisli</a> kategorija.
</p></div></div>

<div class="footdef"><sup><a id="fn.4" class="footnum" href="#fnr.4">4</a></sup> <div class="footpara"><p class="footpara">
NeÄega kao Å¡to je refleksija nema. U principu, ako Å¾elite da
rezonujete o tipovima u vreme izvrÅ¡avanja, to samo znaÄi da vaÅ¡i
tipovi nisu dovoljno dobri.
</p></div></div>

<div class="footdef"><sup><a id="fn.5" class="footnum" href="#fnr.5">5</a></sup> <div class="footpara"><p class="footpara">
Dokazivost se komplikuje kada se u obzir uzima lenje
izvrÅ¡avanje i <a href="https://wiki.haskell.org/Bottom">"bottom"-i</a>.
</p></div></div>

<div class="footdef"><sup><a id="fn.6" class="footnum" href="#fnr.6">6</a></sup> <div class="footpara"><p class="footpara">
Iz <i>Category Theory for Programmers, Bartosz Milewski</i>
</p></div></div>


</div>
</div></div>
<div id="postamble" class="status">
<p class="author">Author: Novak BoÅ¡kov</p>
<p class="date">Created: 2018-06-07 Thu 20:54</p>
<p class="validation"></p>
</div>
</body>
</html>
